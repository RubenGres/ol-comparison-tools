!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=74)}([function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return m})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return y})),n.d(e,"k",(function(){return b})),n.d(e,"l",(function(){return E})),n.d(e,"m",(function(){return C})),n.d(e,"n",(function(){return w})),n.d(e,"o",(function(){return O})),n.d(e,"p",(function(){return x})),n.d(e,"q",(function(){return T})),n.d(e,"r",(function(){return j})),n.d(e,"s",(function(){return L})),n.d(e,"t",(function(){return I})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return S})),n.d(e,"w",(function(){return A})),n.d(e,"z",(function(){return P})),n.d(e,"x",(function(){return D})),n.d(e,"y",(function(){return N})),n.d(e,"A",(function(){return F})),n.d(e,"B",(function(){return k})),n.d(e,"C",(function(){return z})),n.d(e,"D",(function(){return G})),n.d(e,"F",(function(){return U})),n.d(e,"G",(function(){return K})),n.d(e,"E",(function(){return Z})),n.d(e,"a",(function(){return Y}));var i=0,r=1,s=2,o=4,a=8,l=16,h=n(7);function c(t){const e=m();for(let n=0,i=t.length;n<i;++n)O(e,t[n]);return e}function u(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function d(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function g(t,e){return p(t,e[0],e[1])}function f(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function _(t,e){const n=t[0],h=t[1],c=t[2],u=t[3],d=e[0],g=e[1];let f=i;return d<n?f|=l:d>c&&(f|=o),g<h?f|=a:g>u&&(f|=s),f===i&&(f=r),f}function m(){return[1/0,1/0,-1/0,-1/0]}function v(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function y(t){return v(1/0,1/0,-1/0,-1/0,t)}function b(t,e){const n=t[0],i=t[1];return v(n,i,n,i,e)}function E(t,e,n,i,r){return x(y(r),t,e,n,i)}function C(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function w(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function O(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function x(t,e,n,i,r){for(;n<i;n+=r)R(t,e[n],e[n+1]);return t}function R(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function T(t,e){let n;return n=e(L(t)),n||(n=e(I(t)),n||(n=e(k(t)),n||(n=e(F(t)),n||!1)))}function j(t){let e=0;return U(t)||(e=z(t)*D(t)),e}function L(t){return[t[0],t[1]]}function I(t){return[t[2],t[1]]}function M(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function S(t,e){let n;return"bottom-left"===e?n=L(t):"bottom-right"===e?n=I(t):"top-left"===e?n=F(t):"top-right"===e?n=k(t):Object(h.a)(!1,13),n}function A(t,e,n,i,r){const[s,o,a,l,h,c,u,d]=P(t,e,n,i);return v(Math.min(s,a,h,u),Math.min(o,l,c,d),Math.max(s,a,h,u),Math.max(o,l,c,d),r)}function P(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,h=r*a,c=s*o,u=s*a,d=t[0],g=t[1];return[d-l+u,g-h-c,d-l-u,g-h+c,d+l-u,g+h+c,d+l+u,g+h-c,d-l+u,g-h-c]}function D(t){return t[3]-t[1]}function N(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return G(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):y(i),i}function F(t){return[t[0],t[3]]}function k(t){return[t[2],t[3]]}function z(t){return t[2]-t[0]}function G(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function U(t){return t[2]<t[0]||t[3]<t[1]}function K(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Z(t,e,n){let i=!1;const h=_(t,e),c=_(t,n);if(h===r||c===r)i=!0;else{const r=t[0],u=t[1],d=t[2],g=t[3],f=e[0],p=e[1],_=n[0],m=n[1],v=(m-p)/(_-f);let y,b;c&s&&!(h&s)&&(y=_-(m-g)/v,i=y>=r&&y<=d),i||!(c&o)||h&o||(b=m-(_-d)*v,i=b>=u&&b<=g),i||!(c&a)||h&a||(y=_-(m-u)/v,i=y>=r&&y<=d),i||!(c&l)||h&l||(b=m-(_-r)*v,i=b>=u&&b<=g)}return i}function Y(t,e,n,i){let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let s=0;s<i;++s)r.push(t[0]+e*s/i,t[1],t[2],t[1]+n*s/i,t[2]-e*s/i,t[3],t[0],t[3]-n*s/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let t=0,e=r.length;t<e;t+=2)s.push(r[t]),o.push(r[t+1]);return function(t,e,n){return v(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(s,o,n)}},function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,o){const a=r-n,l=o-i;if(0!==a||0!==l){const s=((t-n)*a+(e-i)*l)/(a*a+l*l);s>1?(n=r,i=o):s>0&&(n+=a*s,i+=l*s)}return s(t,e,n,i)}function s(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function o(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let s=n+1;s<e;s++){const e=Math.abs(t[s][n]);e>r&&(r=e,i=s)}if(0===r)return null;const s=t[i];t[i]=t[n],t[n]=s;for(let i=n+1;i<e;i++){const r=-t[i][n]/t[n][n];for(let s=n;s<e+1;s++)n==s?t[i][s]=0:t[i][s]+=r*t[n][s]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function a(t){return 180*t/Math.PI}function l(t){return t*Math.PI/180}function h(t,e){const n=t%e;return n*e<0?n+e:n}function c(t,e,n){return t+n*(e-t)}function u(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function d(t,e){return Math.floor(u(t,e))}function g(t,e){return Math.ceil(u(t,e))}n.d(e,"b",(function(){return i})),n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"i",(function(){return a})),n.d(e,"k",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return c})),n.d(e,"j",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return g}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o}));var i=n(24);function r(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function s(t,e,n,i){return r(t,e,n,i,!0)}function o(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(i.a)(t))}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return x})),n.d(e,"g",(function(){return L})),n.d(e,"h",(function(){return I})),n.d(e,"b",(function(){return S})),n.d(e,"d",(function(){return A})),n.d(e,"i",(function(){return D})),n.d(e,"m",(function(){return N})),n.d(e,"j",(function(){return z})),n.d(e,"k",(function(){return G})),n.d(e,"e",(function(){return U})),n.d(e,"l",(function(){return K})),n.d(e,"f",(function(){return Z}));const i={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const s=6378137*Math.PI,o=[-s,-s,s,s],a=[-180,-85,180,85],l=6378137*Math.log(Math.tan(Math.PI/2));class h extends r{constructor(t){super({code:t,units:"m",extent:o,global:!0,worldExtent:a,getPointResolution:function(t,e){return t/Math.cosh(e[1]/6378137)}})}}const c=[new h("EPSG:3857"),new h("EPSG:102100"),new h("EPSG:102113"),new h("EPSG:900913"),new h("http://www.opengis.net/def/crs/EPSG/0/3857"),new h("http://www.opengis.net/gml/srs/epsg.xml#3857")];function u(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=s*t[r]/180;let n=6378137*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>l?n=l:n<-l&&(n=-l),e[r+1]=n}return e}function d(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/s,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}const g=[-180,-90,180,90],f=6378137*Math.PI/180;class p extends r{constructor(t,e){super({code:t,units:"degrees",extent:g,axisOrientation:e,global:!0,metersPerUnit:f,worldExtent:g})}}const _=[new p("CRS:84"),new p("EPSG:4326","neu"),new p("urn:ogc:def:crs:OGC:1.3:CRS84"),new p("urn:ogc:def:crs:OGC:2:84"),new p("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new p("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new p("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let m={};n(24);let v={};function y(t,e,n){const i=t.getCode(),r=e.getCode();i in v||(v[i]={}),v[i][r]=n}var b=n(0),E=(n(1),n(22)),C=n(44),w=n(52);let O=!0;function x(t){O=!(void 0===t||t)}function R(t,e){if(void 0!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function T(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function j(t){!function(t,e){m[t]=e}(t.getCode(),t),y(t,t,R)}function L(t){return"string"==typeof t?m[e=t]||m[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function I(t,e,n,r){let s;const o=(t=L(t)).getPointResolutionFunc();if(o){if(s=o(e,n),r&&r!==t.getUnits()){const e=t.getMetersPerUnit();e&&(s=s*e/i[r])}}else{const o=t.getUnits();if("degrees"==o&&!r||"degrees"==r)s=e;else{const a=P(t,L("EPSG:4326"));if(a===T&&"degrees"!==o)s=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=a(t,t,2);s=(Object(C.a)(t.slice(0,2),t.slice(2,4))+Object(C.a)(t.slice(4,6),t.slice(6,8)))/2}const l=r?i[r]:t.getMetersPerUnit();void 0!==l&&(s/=l)}}return s}function M(t){!function(t){t.forEach(j)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&y(e,t,R)}))}))}function S(t,e){return t?"string"==typeof t?L(t):t:L(e)}function A(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return P(t,e)===R&&n}function P(t,e){let n=function(t,e){let n;return t in v&&e in v[t]&&(n=v[t][e]),n}(t.getCode(),e.getCode());return n||(n=T),n}function D(t,e){return P(L(t),L(e))}function N(t,e,n){return D(e,n)(t,void 0,t.length)}function F(t,e,n,i){const r=D(e,n);return Object(b.a)(t,r,void 0,i)}let k=null;function z(){return k}function G(t,e){return k?N(t,e,k):t}function U(t,e){return k?N(t,k,e):(O&&!Object(E.b)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(O=!1,Object(w.a)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function K(t,e){return k?F(t,e,k):t}function Z(t,e){return k?F(t,k,e):t}var Y,B,V;M(c),M(_),Y=c,B=u,V=d,_.forEach((function(t){Y.forEach((function(e){y(t,e,B),y(e,t,V)}))}))},function(t,e,n){"use strict";function i(){throw new Error("Unimplemented abstract method.")}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));let r=0;function s(t){return t.ol_uid||(t.ol_uid=String(++r))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(51);function r(t,e){if(!t)throw new i.a(e)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return c}));var i=n(16),r=n(7);new Array(6);function s(){return[1,0,0,1,0,0]}function o(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function a(t,e,n,i,r,s,o,a){const l=Math.sin(s),h=Math.cos(s);return t[0]=i*h,t[1]=r*l,t[2]=-i*l,t[3]=r*h,t[4]=o*i*h-a*i*l+e,t[5]=o*r*l+a*r*h+n,t}function l(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;Object(r.a)(0!==n,32);const s=e[0],o=e[1],a=e[2],l=e[3],h=e[4],c=e[5];return t[0]=l/n,t[1]=-o/n,t[2]=-a/n,t[3]=s/n,t[4]=(a*c-l*h)/n,t[5]=-(s*c-o*h)/n,t}let h;function c(t){const e="matrix("+t.join(", ")+")";if(i.g)return e;const n=h||(h=document.createElement("div"));return n.style.transform=e,n.style.transform}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return h}));var i=n(16);function r(t,e,n,r){let s;return s=n&&n.length?n.shift():i.g?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",r)}function s(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function o(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function h(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--i):t.appendChild(s))}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}));var i=n(13);function r(){return!0}function s(){return!1}function o(){}function a(t){let e,n,r,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===r&&Object(i.b)(o,n)||(s=!0,r=this,n=o,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;let r;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof n?n(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return i-1}function s(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function o(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function a(t,e,n){const r=e||i;return t.every((function(e,i){if(0===i)return!0;const s=r(t[i-1],e);return!(s>0||n&&0===s)}))}n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return a}))},function(t,e,n){"use strict";var i=n(15),r=n(32),s=n(50),o=n(6),a=n(24);class l extends i.a{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class h extends s.a{constructor(t){super(),this.on,this.once,this.un,Object(o.b)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n="change:"+t,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e)),n=r.a.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e))}addChangeListener(t,e){this.addEventListener("change:"+t,e)}removeChangeListener(t,e){this.removeEventListener("change:"+t,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Object(a.b)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}e.a=h},function(t,e,n){"use strict";e.a=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return c}));const i="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("firefox"),s=(i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),i.includes("webkit")&&!i.includes("edge")),o=i.includes("macintosh"),a="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,h="undefined"!=typeof Image&&Image.prototype.decode,c=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},function(t,e,n){"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return h}));const i="ol-hidden",r="ol-unselectable",s="ol-control",o="ol-collapsed",a=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),l=["style","variant","weight","size","lineHeight","family"],h=function(t){const e=t.match(a);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,i=l.length;t<i;++t){const i=e[t+1];void 0!==i&&(n[l[t]]=i)}return n.families=n.family.split(/,\s?/),n}},function(t,e,n){"use strict";function i(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function r(t,e,n){return t+"/"+e+"/"+n}function s(t){return r(t[0],t[1],t[2])}function o(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function l(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return!s||s.containsXY(i,r)}n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return l}))},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function s(t){return 3*t*t-2*t*t*t}function o(t){return t}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return o}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return h}));var i=n(0);n(1);function r(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function s(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function o(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function a(t,e){return t[0]*=e,t[1]*=e,t}function l(t,e){if(e.canWrapX()){const n=Object(i.C)(e.getExtent()),r=h(t,e,n);r&&(t[0]-=r*n)}return t}function h(t,e,n){const r=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Object(i.C)(r),s=Math.floor((t[0]-r[0])/n)),s}},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";function i(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var i=n(55),r=n(4),s=n(10),o=n(27),a=n(7),l=n(2);class h extends i.a{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(s.a.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(s.a.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Object(l.c)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Object(l.a)(t,r.a.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(s.a.MAP,t)}getMapInternal(){return this.get(s.a.MAP)}setMap(t){this.mapPrecomposeKey_&&(Object(l.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(l.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(l.a)(t,o.a.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Object(a.a)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Object(l.a)(this,r.a.CHANGE,t.render,t),this.changed())}setSource(t){this.set(s.a.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function c(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}e.a=h},function(t,e,n){"use strict";var i=n(51),r=n(14),s=n(23),o=n(15);const a="length";class l extends o.a{constructor(t,e,n){super(t),this.element=e,this.index=n}}class h extends r.a{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l(s.a.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l(s.a.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l(s.a.REMOVE,n,t)),this.dispatchEvent(new l(s.a.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.a(58)}}e.a=h},function(t,e,n){"use strict";e.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o}));var i=n(0);function r(t,e,n,r,o){return!Object(i.q)(o,(function(i){return!s(t,e,n,r,i[0],i[1])}))}function s(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=s?i>s&&(n-a)*(s-l)-(r-a)*(i-l)>0&&o++:i<=s&&(n-a)*(s-l)-(r-a)*(i-l)<0&&o--,a=n,l=i}return 0!==o}function o(t,e,n,i,r,o){if(0===n.length)return!1;if(!s(t,e,n[0],i,r,o))return!1;for(let e=1,a=n.length;e<a;++e)if(s(t,n[e-1],n[e],i,r,o))return!1;return!0}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i=n(1);function r(t){if(void 0!==t)return 0}function s(t){if(void 0!==t)return t}function o(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){return t=t||Object(i.k)(5),function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class i{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,n,r,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=n,s.maxY=r,s):new i(t,e,n,r)}e.b=i},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";var i=n(14),r=n(30),s=n(12),o=n(2),a=n(11);class l extends i.a{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Object(a.d)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Object(a.d)(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)Object(o.c)(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==s.c&&this.listenerKeys.push(Object(o.a)(t,r.a.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}e.a=l},function(t,e,n){"use strict";var i=n(25),r="preload",s="useInterimTilesOnError";class o extends i.a{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r)}setPreload(t){this.set(r,t)}getUseInterimTilesOnError(){return this.get(s)}setUseInterimTilesOnError(t){this.set(s,t)}getData(t){return super.getData(t)}}var a=o,l=n(61),h=n(59),c=n(47),u=n(31),d=n(3),g=n(8),f=n(13),p=n(0),_=n(5),m=n(6),v=n(17);class y extends l.a{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(p.h)(),this.tmpTileRange_=new u.b(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==d.a.LOADED||n==d.a.EMPTY||n==d.a.ERROR&&!i}getTile(t,e,n,i){const r=i.pixelRatio,s=i.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(t,e,n,r,s);return a.getState()==d.a.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Object(g.a)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Object(p.e)(r,i))return null;const s=e.pixelRatio,o=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),u=l.getTileGridForProjection(a.projection),f=l.getTilePixelRatio(e.pixelRatio);for(let t=u.getZForResolution(a.resolution);t>=u.getMinZoom();--t){const e=u.getTileCoordForCoordAndZ(i,t),n=l.getTile(t,e[1],e[2],s,o);if(!(n instanceof h.a||n instanceof c.a)||n instanceof c.a&&n.getState()===d.a.EMPTY)return null;if(n.getState()!==d.a.LOADED)continue;const r=u.getOrigin(t),g=Object(v.c)(u.getTileSize(t)),p=u.getResolution(t),_=Math.floor(f*((i[0]-r[0])/p-e[1]*g[0])),m=Math.floor(f*((r[1]-i[1])/p-e[2]*g[1])),y=Math.round(f*l.getGutterForProjection(a.projection));return this.getImageData(n.getImage(),_+y,m+y)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,s=i.resolution,o=i.center,a=i.rotation,l=t.pixelRatio,h=this.getLayer(),c=h.getSource(),u=c.getRevision(),v=c.getTileGridForProjection(r),y=v.getZForResolution(s,c.zDirection),b=v.getResolution(y);let E=t.extent;const C=t.viewState.resolution,w=c.getTilePixelRatio(l),O=Math.round(Object(p.C)(E)/C*l),x=Math.round(Object(p.x)(E)/C*l),R=n.extent&&Object(_.f)(n.extent,r);R&&(E=Object(p.y)(E,Object(_.f)(n.extent,r)));const T=b*O/2/w,j=b*x/2/w,L=[o[0]-T,o[1]-j,o[0]+T,o[1]+j],I=v.getTileRangeForExtentAndZ(E,y),M={};M[y]={};const S=this.createLoadedTileFinder(c,r,M),A=this.tmpExtent,P=this.tmpTileRange_;this.newTiles_=!1;const D=a?Object(p.z)(i.center,C,a,t.size):void 0;for(let e=I.minX;e<=I.maxX;++e)for(let i=I.minY;i<=I.maxY;++i){if(a&&!v.tileCoordIntersectsViewport([y,e,i],D))continue;const r=this.getTile(y,e,i,t);if(this.isDrawableTile(r)){const e=Object(m.b)(this);if(r.getState()==d.a.LOADED){M[y][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==n.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}const s=v.getTileCoordChildTileRange(r.tileCoord,P,A);let o=!1;s&&(o=S(y+1,s)),o||v.forEachTileCoordParentTileRange(r.tileCoord,S,P,A)}const N=b/s*l/w;Object(g.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-O/2,-x/2);const F=Object(g.e)(this.pixelTransform);this.useContainer(e,F,this.getBackground(t));const k=this.context,z=k.canvas;Object(g.d)(this.inversePixelTransform,this.pixelTransform),Object(g.b)(this.tempTransform,O/2,x/2,N,N,0,-O/2,-x/2),z.width!=O||z.height!=x?(z.width=O,z.height=x):this.containerReused||k.clearRect(0,0,O,x),R&&this.clipUnrotated(k,t,R),c.getInterpolate()||(k.imageSmoothingEnabled=!1),this.preRender(k,t),this.renderedTiles.length=0;let G,U,K,Z=Object.keys(M).map(Number);Z.sort(f.a),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(G=[],U=[]):Z=Z.reverse();for(let e=Z.length-1;e>=0;--e){const n=Z[e],i=c.getTilePixelSize(n,l,r),s=v.getResolution(n)/b,o=i[0]*s*N,a=i[1]*s*N,h=v.getTileCoordForCoordAndZ(Object(p.A)(L),n),u=v.getTileCoordExtent(h),d=Object(g.a)(this.tempTransform,[w*(u[0]-L[0])/b,w*(L[3]-u[3])/b]),f=w*c.getGutterForProjection(r),_=M[n];for(const e in _){const i=_[e],r=i.tileCoord,s=h[1]-r[1],l=Math.round(d[0]-(s-1)*o),u=h[2]-r[2],g=Math.round(d[1]-(u-1)*a),v=Math.round(d[0]-s*o),b=Math.round(d[1]-u*a),E=l-v,C=g-b,w=y===n,O=w&&1!==i.getAlpha(Object(m.b)(this),t.time);let x=!1;if(!O)if(G){K=[v,b,v+E,b,v+E,b+C,v,b+C];for(let t=0,e=G.length;t<e;++t)if(y!==n&&n<U[t]){const e=G[t];Object(p.D)([v,b,v+E,b+C],[e[0],e[3],e[4],e[7]])&&(x||(k.save(),x=!0),k.beginPath(),k.moveTo(K[0],K[1]),k.lineTo(K[2],K[3]),k.lineTo(K[4],K[5]),k.lineTo(K[6],K[7]),k.moveTo(e[6],e[7]),k.lineTo(e[4],e[5]),k.lineTo(e[2],e[3]),k.lineTo(e[0],e[1]),k.clip())}G.push(K),U.push(n)}else k.clearRect(v,b,E,C);this.drawTileImage(i,t,v,b,E,C,f,w),G&&!O?(x&&k.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,c,i)}}return this.renderedRevision=u,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!Object(p.m)(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,c,v,l,r,E,y,h.getPreload()),this.scheduleExpireCache(t,c),this.postRender(k,t),n.extent&&k.restore(),k.imageSmoothingEnabled=!0,F!==z.style.transform&&(z.style.transform=F),this.container}drawTileImage(t,e,n,i,r,s,o,a){const l=this.getTileImage(t);if(!l)return;const h=Object(m.b)(this),c=e.layerStatesArray[e.layerIndex],u=c.opacity*(a?t.getAlpha(h,e.time):1),d=u!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,o,o,l.width-2*o,l.height-2*o,n,i,r,s),d&&this.context.restore(),u!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=Object(m.b)(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=Object(m.b)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,s,o,a,l){const h=Object(m.b)(e);h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],u=t.tileQueue,g=n.getMinZoom(),f=t.viewState.rotation,_=f?Object(p.z)(t.viewState.center,t.viewState.resolution,f,t.size):void 0;let v,y,b,E,C,w,O=0;for(w=g;w<=o;++w)for(y=n.getTileRangeForExtentAndZ(s,w,y),b=n.getResolution(w),E=y.minX;E<=y.maxX;++E)for(C=y.minY;C<=y.maxY;++C)f&&!n.tileCoordIntersectsViewport([w,E,C],_)||(o-w<=a?(++O,v=e.getTile(w,E,C,i,r),v.getState()==d.a.IDLE&&(c[v.getKey()]=!0,u.isKeyQueued(v.getKey())||u.enqueue([v,h,n.getTileCoordCenter(v.tileCoord),b])),void 0!==l&&l(v)):e.useTile(w,E,C,r));e.updateCacheSize(O,r)}}var b=y;e.a=class extends a{constructor(t){super(t)}createRenderer(){return new b(this)}}},function(t,e,n){"use strict";var i=n(36),r=n(15),s=n(12),o=n(24);class a extends i.a{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const o=e?new r.a(t):t;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let h;n in a||(a[n]=0,l[n]=0),++a[n];for(let t=0,e=i.length;t<e;++t)if(h="handleEvent"in i[t]?i[t].handleEvent(o):i[t].call(this,o),!1===h||o.propagationStopped){h=!1;break}if(0==--a[n]){let t=l[n];for(delete l[n];t--;)this.removeEventListener(n,s.c);delete a[n]}return h}disposeInternal(){this.listeners_&&Object(o.a)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=s.c,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}}e.a=a},function(t,e,n){"use strict";e.a=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return d}));var i=n(62),r=n(40),s=n(5),o=n(0),a=n(17);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,r){return function(t,e,n,r){r=void 0!==r?r:"top-left";const s=u(t,e,n);return new i.a({extent:t,origin:Object(o.v)(t,r),resolutions:s,tileSize:n})}(d(t),e,n,r)}(t),t.setDefaultTileGrid(e)),e}function h(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=d(n);if(!Object(o.e)(s,r)){const e=Object(o.C)(s),n=Math.ceil((s[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}return e}function c(t){const e=t||{},n=e.extent||Object(s.g)("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:u(n,e.maxZoom,e.tileSize,e.maxResolution)};return new i.a(r)}function u(t,e,n,i){e=void 0!==e?e:r.a,n=Object(a.c)(void 0!==n?n:r.b);const s=Object(o.x)(t),l=Object(o.C)(t);i=i>0?i:Math.max(l/n[0],s/n[1]);const h=e+1,c=new Array(h);for(let t=0;t<h;++t)c[t]=i/Math.pow(2,t);return c}function d(t){let e=(t=Object(s.g)(t)).getExtent();if(!e){const n=180*s.a.degrees/t.getMetersPerUnit();e=Object(o.i)(-n,-n,n,n)}return e}},function(t,e,n){"use strict";var i=n(14),r=n(20),s={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},o=n(40),a=n(5),l=n(12),h=n(22),c=n(7),u=n(1);function d(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,h=e?0:s[1]*r,c=a?a[0]:0,d=a?a[1]:0;let g=t[0]+l/2+c,f=t[2]-l/2+c,p=t[1]+h/2+d,_=t[3]-h/2+d;g>f&&(g=(f+g)/2,f=g),p>_&&(p=(_+p)/2,_=p);let m=Object(u.b)(i[0],g,f),v=Object(u.b)(i[1],p,_);if(o&&n&&r){const t=30*r;m+=-t*Math.log(1+Math.max(0,g-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-f)/t),v+=-t*Math.log(1+Math.max(0,p-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-_)/t)}return[m,v]}}function g(t){return t}var f=n(0),p=n(13);function _(t,e,n,i){const r=Object(f.C)(e)/n[0],s=Object(f.x)(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function m(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(u.b)(i,n/2,2*e)}function v(t,e,n,i,r){return n=void 0===n||n,function(s,o,a,l){if(void 0!==s){const o=i?_(t,i,a,r):t;return n&&l?m(s,o,e):Object(u.b)(s,e,o)}}}var y=n(29),b=n(21),E=n(48);class C extends i.a{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Object(a.b)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Object(a.c)(),t.center&&(t.center=Object(a.e)(t.center,this.projection_)),t.extent&&(t.extent=Object(a.f)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in s)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;let r=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28;const l=void 0!==t.zoomFactor?t.zoomFactor:2,h=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,g=Object(a.b)(t.projection,"EPSG:3857"),y=g.getExtent();let b=t.constrainOnlyCenter,E=t.extent;h||E||!g.isGlobal()||(b=!1,E=y);if(void 0!==t.resolutions){const o=t.resolutions;n=o[r],i=void 0!==o[s]?o[s]:o[o.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=t[0],h=t[t.length-1],c=n?_(l,n,o,i):l;if(a)return e?m(r,c,h):Object(u.b)(r,h,c);const d=Math.min(c,r),g=Math.floor(Object(p.e)(t,d,s));return t[g]>c&&g<t.length-1?t[g+1]:t[g]}}}(o,c,!b&&E,d):v(n,i,c,!b&&E,d)}else{const h=(y?Math.max(Object(f.C)(y),Object(f.x)(y)):360*a.a.degrees/g.getMetersPerUnit())/o.b/Math.pow(2,0),p=h/Math.pow(2,28);n=t.maxResolution,void 0!==n?r=0:n=h/Math.pow(l,r),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,s):h/Math.pow(l,s):p),s=r+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,s-r),e=t.constrainResolution?function(t,e,n,i,r,s){return i=void 0===i||i,n=void 0!==n?n:0,function(o,a,l,h){if(void 0!==o){const c=r?_(e,r,l,s):e;if(h)return i?m(o,c,n):Object(u.b)(o,n,c);const d=1e-9,g=Math.ceil(Math.log(e/c)/Math.log(t)-d),f=-a*(.5-d)+.5,p=Math.min(c,o),v=Math.floor(Math.log(e/p)/Math.log(t)+f),y=Math.max(g,v),b=e/Math.pow(t,y);return Object(u.b)(b,n,c)}}}(l,n,i,c,!b&&E,d):v(n,i,c,!b&&E,d)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return d(t.extent,t.constrainOnlyCenter,e)}const e=Object(a.b)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return g}(t),r=n.constraint,l=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?Object(y.b)():!1===e?y.d:"number"==typeof e?Object(y.a)(e):y.d}return y.c}(t);this.constraints_={center:i,resolution:r,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(i[3]-e[3]+e[1]-i[1]),o=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=Object(a.e)(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Object(a.e)(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&w(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;i<n;++i){const t=arguments[i],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||b.c,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=l;const e=Object(u.e)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=l+e,l=n.targetRotation}O(n)?n.complete=!0:s+=n.duration,h.push(n)}this.animations_.push(h),this.setHint(r.a.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.a.ANIMATING]>0}getInteracting(){return this.hints_[r.a.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.a.ANIMATING,-this.hints_[r.a.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&w(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;const o=t-r.start;let a=r.duration>0?o/r.duration:1;a>=1?(r.complete=!0,a=1):s=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],n=r.targetCenter[0],i=r.targetCenter[1];this.nextCenter_=r.targetCenter;const s=t+l*(n-t),o=e+l*(i-e);this.targetCenter_=[s,o]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?Object(u.e)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(s){this.animations_[n]=null,this.setHint(r.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&w(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Object(h.d)(n,t-this.getRotation()),Object(h.a)(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Object(a.k)(t,this.getProjection()):t}getCenterInternal(){return this.get(s.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Object(a.l)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Object(c.a)(e,1);const n=this.getResolution();Object(c.a)(void 0!==n,2);const i=this.getRotation();return Object(c.a)(void 0!==i,3),Object(f.w)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(s.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Object(a.f)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Object(f.C)(t)/e[0],i=Object(f.x)(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(s.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=x(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=Object(p.e)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Object(u.b)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Object(u.b)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Object(c.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(c.a)(!Object(f.F)(t),25);const e=Object(a.f)(t,this.getProjection());n=Object(E.b)(e)}else if("Circle"===t.getType()){const e=Object(a.f)(t.getExtent(),this.getProjection());n=Object(E.b)(e),n.rotate(this.getRotation(),Object(f.u)(e))}else{const e=Object(a.j)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let t=0,e=r.length;t<e;t+=s){const e=r[t]*n-r[t+1]*i,s=r[t]*i+r[t+1]*n;o=Math.min(o,e),a=Math.min(a,s),l=Math.max(l,e),h=Math.max(h,s)}return[o,a,l,h]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),d=Object(f.u)(o);d[0]+=(i[1]-i[3])/2*a,d[1]+=(i[0]-i[2])/2*a;const g=d[0]*u-d[1]*c,p=d[1]*u+d[0]*c,_=this.getConstrainedCenter([g,p],a),m=e.callback?e.callback:l.c;void 0!==e.duration?this.animateInternal({resolution:a,center:_,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=_,this.applyTargetState_(!1,!0),w(m,!0))}centerOn(t,e,n){this.centerOnInternal(Object(a.e)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(x(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-n),a=x(t,i,[o[0]/2+s[3],o[1]/2+s[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Object(a.k)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Object(a.e)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Object(a.e)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Object(a.e)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(s.ROTATION)!==i&&this.set(s.ROTATION,i),this.get(s.RESOLUTION)!==o&&(this.set(s.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(s.CENTER)&&Object(h.b)(this.get(s.CENTER),a)||this.set(s.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&Object(h.b)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:b.b,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.a.INTERACTING,1)}endInteraction(t,e,n){n=n&&Object(a.e)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(r.a.INTERACTING,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function w(t,e){setTimeout((function(){t(e)}),0)}function O(t){return!(t.sourceCenter&&t.targetCenter&&!Object(h.b)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function x(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;return[a*s-l*o,l*s+a*o]}e.a=C},function(t,e,n){"use strict";var i=n(14),r=n(5);class s extends i.a{constructor(t){super(),this.projection=Object(r.g)(t.projection),this.attributions_=o(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o(t),this.changed()}setState(t){this.state_=t,this.changed()}}function o(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.a=s},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));const i=42,r=256},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return g}));var i=n(0),r=n(11),s=n(5),o=n(1);let a;const l=[];function h(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function c(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function u(t,e,n,r){const o=Object(s.m)(n,e,t);let a=Object(s.h)(e,r,n);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const h=t.getMetersPerUnit();void 0!==h&&(a/=h);const c=t.getExtent();if(!c||Object(i.e)(c,o)){const e=Object(s.h)(t,a,o)/a;isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,n,r){const s=Object(i.u)(n);let o=u(t,e,s,r);return(!isFinite(o)||o<=0)&&Object(i.q)(n,(function(n){return o=u(t,e,n,r),isFinite(o)&&o>0})),o}function g(t,e,n,s,u,d,g,f,p,_,m,v){const y=Object(r.a)(Math.round(n*t),Math.round(n*e),l);if(v||(y.imageSmoothingEnabled=!1),0===p.length)return y.canvas;function b(t){return Math.round(t*n)/n}y.scale(n,n),y.globalCompositeOperation="lighter";const E=Object(i.h)();p.forEach((function(t,e,n){Object(i.n)(E,t.extent)}));const C=Object(i.C)(E),w=Object(i.x)(E),O=Object(r.a)(Math.round(n*C/s),Math.round(n*w/s),l);v||(O.imageSmoothingEnabled=!1);const x=n/s;p.forEach((function(t,e,n){const r=t.extent[0]-E[0],s=-(t.extent[3]-E[3]),o=Object(i.C)(t.extent),a=Object(i.x)(t.extent);t.image.width>0&&t.image.height>0&&O.drawImage(t.image,_,_,t.image.width-2*_,t.image.height-2*_,r*x,s*x,o*x,a*x)}));const R=Object(i.A)(g);return f.getTriangles().forEach((function(t,e,i){const u=t.source,g=t.target;let f=u[0][0],p=u[0][1],_=u[1][0],m=u[1][1],C=u[2][0],w=u[2][1];const x=b((g[0][0]-R[0])/d),T=b(-(g[0][1]-R[1])/d),j=b((g[1][0]-R[0])/d),L=b(-(g[1][1]-R[1])/d),I=b((g[2][0]-R[0])/d),M=b(-(g[2][1]-R[1])/d),S=f,A=p;f=0,p=0,_-=S,m-=A,C-=S,w-=A;const P=[[_,m,0,0,j-x],[C,w,0,0,I-x],[0,0,_,m,L-T],[0,0,C,w,M-T]],D=Object(o.f)(P);if(D){if(y.save(),y.beginPath(),function(){if(void 0===a){const t=Object(r.a)(6,6,l);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",h(t,4,5,4,0),h(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=c(e,0)||c(e,4)||c(e,8),Object(r.b)(t),l.push(t.canvas)}return a}()||!v){y.moveTo(j,L);const t=4,e=x-j,n=T-L;for(let i=0;i<t;i++)y.lineTo(j+b((i+1)*e/t),L+b(i*n/(t-1))),i!=t-1&&y.lineTo(j+b((i+1)*e/t),L+b((i+1)*n/(t-1)));y.lineTo(I,M)}else y.moveTo(j,L),y.lineTo(x,T),y.lineTo(I,M);y.clip(),y.transform(D[0],D[2],D[1],D[3],x,T),y.translate(E[0]-S,E[3]-A),y.scale(s/n,-s/n),y.drawImage(O.canvas,0,0),y.restore()}})),Object(r.b)(O),l.push(O.canvas),m&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,f.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-R[0])/d,s=-(i[0][1]-R[1])/d,o=(i[1][0]-R[0])/d,a=-(i[1][1]-R[1])/d,l=(i[2][0]-R[0])/d,h=-(i[2][1]-R[1])/d;y.beginPath(),y.moveTo(o,a),y.lineTo(r,s),y.lineTo(l,h),y.closePath(),y.stroke()})),y.restore()),y.canvas}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n(55),r=n(26),s=n(23),o=n(15),a=n(4),l=n(32),h=n(7),c=n(24),u=n(0),d=n(6),g=n(2);class f extends o.a{constructor(t,e){super(t),this.layer=e}}const p="layers";class _ extends i.a{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(p,this.handleLayersChanged_),n?Array.isArray(n)?n=new r.a(n.slice(),{unique:!0}):Object(h.a)("function"==typeof n.getArray,43):n=new r.a(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(g.c),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Object(g.a)(t,s.a.ADD,this.handleLayersAdd_,this),Object(g.a)(t,s.a.REMOVE,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(g.c);Object(c.a)(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new f("addlayer",n))}this.changed()}registerLayerListeners_(t){const e=[Object(g.a)(t,l.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(g.a)(t,a.a.CHANGE,this.handleLayerChange_,this)];t instanceof _&&e.push(Object(g.a)(t,"addlayer",this.handleLayerGroupAdd_,this),Object(g.a)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Object(d.b)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new f("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new f("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new f("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=Object(d.b)(e);this.listenerKeys_[n].forEach(g.c),delete this.listenerKeys_[n],this.dispatchEvent(new f("removelayer",e)),this.changed()}getLayers(){return this.get(p)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new f("removelayer",t[e]))}this.set(p,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let t=n,s=e.length;t<s;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=Object(u.y)(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=r)}return e}getSourceState(){return"ready"}}e.b=_},function(t,e,n){"use strict";var i=n(35),r=n(4),s=n(6);class o extends i.a{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=i}changed(){this.dispatchEvent(r.a.CHANGE)}getExtent(){return this.extent}getImage(){return Object(s.a)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){Object(s.a)()}}e.a=o},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}));var i=n(1);function r(t,e,n){n=n||6371008.8;const r=Object(i.k)(t[1]),s=Object(i.k)(e[1]),o=(s-r)/2,a=Object(i.k)(e[0]-t[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function s(t,e,n,r){r=r||6371008.8;const s=Object(i.k)(t[1]),o=Object(i.k)(t[0]),a=e/r,l=Math.asin(Math.sin(s)*Math.cos(a)+Math.cos(s)*Math.sin(a)*Math.cos(n)),h=o+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(s),Math.cos(a)-Math.sin(s)*Math.sin(l));return[Object(i.i)(h),Object(i.i)(l)]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n(15),r=n(39),s=n(60),o=n(3),a=n(6),l=n(7),h=n(5),c=n(19),u=n(37),d=n(17);class g extends r.a{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Object(d.c)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new s.a(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let s,a,l,h=!0;for(let t=n.minX;t<=n.maxX;++t)for(let u=n.minY;u<=n.maxY;++u)a=Object(c.d)(e,t,u),l=!1,r.containsKey(a)&&(s=r.get(a),l=s.getState()===o.a.LOADED,l&&(l=!1!==i(s))),l||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,r){return Object(a.a)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Object(u.c)(t)}getTileCacheForProjection(t){const e=this.getProjection();return Object(l.a)(null===e||Object(h.d)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),s=Object(d.c)(i.getTileSize(t),this.tmpSize);return 1==r?s:Object(d.b)(s,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=Object(u.d)(n,t,e)),Object(c.f)(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class f extends i.a{constructor(t,e){super(t),this.tile=e}}e.b=g},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var i=n(7),r=n(1);const s=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:function(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);const r=void 0===t[3]?1:Math.round(100*t[3])/100;return"rgba("+e+","+n+","+i+","+r+")"}(t)}function l(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const h=function(){const t={};let e=0;return function(n){let r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){let n=0;for(const i in t)0==(3&n++)&&(delete t[i],--e)}r=function(t){let e,n,r,a,h;o.exec(t)&&(t=l(t));if(s.exec(t)){const i=t.length-1;let s;s=i<=4?1:2;const o=4===i||8===i;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),a=o?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,o&&(a=(a<<4)+a)),h=[e,n,r,a/255]}else t.startsWith("rgba(")?(h=t.slice(5,-1).split(",").map(Number),u(h)):t.startsWith("rgb(")?(h=t.slice(4,-1).split(",").map(Number),h.push(1),u(h)):Object(i.a)(!1,14);return h}(n),t[n]=r,++e}return r}}();function c(t){return Array.isArray(t)?t:h(t)}function u(t){return t[0]=Object(r.b)(t[0]+.5|0,0,255),t[1]=Object(r.b)(t[1]+.5|0,0,255),t[2]=Object(r.b)(t[2]+.5|0,0,255),t[3]=Object(r.b)(t[3],0,1),t}},function(t,e,n){"use strict";var i=n(53),r=n(4),s=n(57),o=n(3),a=n(54),l=n(41),h=n(1),c=n(0),u=n(2),d=n(11);class g extends s.a{constructor(t,e,n,r,s,u,d,g,f,p,_,m){super(s,o.a.IDLE,{interpolate:!!m}),this.renderEdges_=void 0!==_&&_,this.pixelRatio_=d,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=u||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const v=r.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const E=y?Object(c.y)(v,y):v;if(0===Object(c.r)(E))return void(this.state=o.a.EMPTY);const C=t.getExtent();C&&(b=b?Object(c.y)(b,C):C);const w=r.getResolution(this.wrappedTileCoord_[0]),O=Object(l.a)(t,n,E,w);if(!isFinite(O)||O<=0)return void(this.state=o.a.EMPTY);const x=void 0!==p?p:i.a;if(this.triangulation_=new a.a(t,n,E,b,O*x,w),0===this.triangulation_.getTriangles().length)return void(this.state=o.a.EMPTY);this.sourceZ_=e.getZForResolution(O);let R=this.triangulation_.calculateSourceExtent();if(b&&(t.canWrapX()?(R[1]=Object(h.b)(R[1],b[1],b[3]),R[3]=Object(h.b)(R[3],b[1],b[3])):R=Object(c.y)(R,b)),Object(c.r)(R)){const t=e.getTileRangeForExtentAndZ(R,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=f(this.sourceZ_,e,n,d);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=o.a.EMPTY)}else this.state=o.a.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(l.d)(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=o.a.LOADED}this.changed()}load(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const n=e.getState();if(n==o.a.IDLE||n==o.a.LOADING){t++;const n=Object(u.a)(e,r.a.CHANGE,(function(i){const r=e.getState();r!=o.a.LOADED&&r!=o.a.ERROR&&r!=o.a.EMPTY||(Object(u.c)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==o.a.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(u.c),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Object(d.b)(this.canvas_.getContext("2d")),l.c.push(this.canvas_),this.canvas_=null),super.release()}}e.a=g},function(t,e,n){"use strict";n.d(e,"b",(function(){return Y}));var i=n(14),r=n(6),s=n(8),o=n(0),a=n(5),l=n(12);function h(t,e,n,i,r,s){s=s||[];let o=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];s[o++]=r[0]*e+r[2]*n+r[4],s[o++]=r[1]*e+r[3]*n+r[5]}return s&&s.length!=o&&(s.length=o),s}const c=Object(s.c)();class u extends i.a{constructor(){super(),this.extent_=Object(o.h)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Object(l.d)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Object(r.a)()}closestPointXY(t,e,n,i){return Object(r.a)()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Object(r.a)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Object(o.j)(t),this.extentRevision_=this.getRevision()}return Object(o.G)(this.extent_,t)}rotate(t,e){Object(r.a)()}scale(t,e,n){Object(r.a)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Object(r.a)()}getType(){return Object(r.a)()}applyTransform(t){Object(r.a)()}intersectsExtent(t){return Object(r.a)()}translate(t,e){Object(r.a)()}transform(t,e){const n=Object(a.g)(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const l=n.getExtent(),u=n.getWorldExtent(),d=Object(o.x)(u)/Object(o.x)(l);return Object(s.b)(c,u[0],u[3],d,-d,0,0,0),h(t,0,t.length,r,c,i),Object(a.i)(n,e)(t,i,r)}:Object(a.i)(n,e);return this.applyTransform(i),this}}var d=u;function g(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var f=class extends d{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Object(o.l)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Object(r.a)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=g(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Object(r.a)()}setLayout(t,e,n){let i;if(t)i=g(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),h=s[0],c=s[1];let u=0;for(let r=e;r<n;r+=i){const e=t[r]-h,n=t[r+1]-c;o[u++]=h+e*a-n*l,o[u++]=c+e*l+n*a;for(let e=r+2;e<r+i;++e)o[u++]=t[e]}o&&o.length!=u&&(o.length=u)}(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=Object(o.u)(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();!function(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let o=e;o<n;o+=i){const e=t[o]-l,n=t[o+1]-h;a[c++]=l+r*e,a[c++]=h+s*n;for(let e=o+2;e<o+i;++e)a[c++]=t[e]}a&&a.length!=c&&(a.length=c)}(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+i;++e)o[a++]=t[e]}o&&o.length!=a&&(o.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}},p=n(1);function _(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],h=t[n]-a,c=t[n+1]-l;let u;if(0===h&&0===c)u=e;else{const d=((r-a)*h+(s-l)*c)/(h*h+c*c);if(d>1)u=n;else{if(d>0){for(let r=0;r<i;++r)o[r]=Object(p.d)(t[e+r],t[n+r],d);return void(o.length=i)}u=e}}for(let e=0;e<i;++e)o[e]=t[u+e];o.length=i}function m(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=Object(p.g)(s,o,n,i);a>r&&(r=a),s=n,o=i}return r}function v(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];r=m(t,e,o,i,r),e=o}return r}function y(t,e,n,i,r,s,o,a,l,h,c){if(e==n)return h;let u,d;if(0===r){if(d=Object(p.g)(o,a,t[e],t[e+1]),d<h){for(u=0;u<i;++u)l[u]=t[e+u];return l.length=i,d}return h}c=c||[NaN,NaN];let g=e+i;for(;g<n;)if(_(t,g-i,g,i,o,a,c),d=Object(p.g)(o,a,c[0],c[1]),d<h){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i,g+=i}else g+=i*Math.max((Math.sqrt(d)-Math.sqrt(h))/r|0,1);if(s&&(_(t,n-i,e,i,o,a,c),d=Object(p.g)(o,a,c[0],c[1]),d<h)){for(h=d,u=0;u<i;++u)l[u]=c[u];l.length=i}return h}function b(t,e,n,i,r,s,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=n.length;u<d;++u){const d=n[u];h=y(t,e,d,i,r,s,o,a,l,h,c),e=d}return h}function E(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let n=0;n<i;++n)t[e++]=s[n]}return e}function C(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=E(t,e,n[o],i);r[s++]=a,e=a}return r.length=s,r}function w(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,n-i];let c=0;for(;h.length>0;){const n=h.pop(),s=h.pop();let o=0;const a=t[s],u=t[s+1],d=t[n],g=t[n+1];for(let e=s+i;e<n;e+=i){const n=t[e],i=t[e+1],r=Object(p.h)(n,i,a,u,d,g);r>o&&(c=e,o=r)}o>r&&(l[(c-e)/i]=1,s+i<c&&h.push(s,c),c+i<n&&h.push(c,n))}for(let n=0;n<a;++n)l[n]&&(s[o++]=t[e+n*i],s[o++]=t[e+n*i+1]);return o}function O(t,e){return e*Math.round(t/e)}function x(t,e,n,i,r,s,o){if(e==n)return o;let a,l,h=O(t[e],r),c=O(t[e+1],r);e+=i,s[o++]=h,s[o++]=c;do{if(a=O(t[e],r),l=O(t[e+1],r),(e+=i)==n)return s[o++]=a,s[o++]=l,o}while(a==h&&l==c);for(;e<n;){const n=O(t[e],r),u=O(t[e+1],r);if(e+=i,n==a&&u==l)continue;const d=a-h,g=l-c,f=n-h,p=u-c;d*p==g*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(g<0&&p<g||g==p||g>0&&p>g)?(a=n,l=u):(s[o++]=a,s[o++]=l,h=a,c=l,a=n,l=u)}return s[o++]=a,s[o++]=l,o}function R(t,e,n,i,r,s,o,a){for(let l=0,h=n.length;l<h;++l){const h=n[l];o=x(t,e,h,i,r,s,o),a.push(o),e=h}return o}function T(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function j(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];r[s++]=T(t,e,a,i,r[s]),e=a}return r.length=s,r}function L(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=o*n-s*i,s=n,o=i}return r/2}function I(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s];r+=L(t,e,o,i),e=o}return r}class M extends f{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new M(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<Object(o.d)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return L(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return T(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=w(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new M(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=E(this.flatCoordinates,0,t,this.stride),this.changed()}}var S=M;class A extends f{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new A(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,s=Object(p.g)(t,e,r[0],r[1]);if(s<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,s}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Object(o.k)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Object(o.g)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}var P=A,D=n(13),N=n(28);function F(t,e,n,i,r,s,o){let a,l,h,c,u,d,g;const f=r[s+1],p=[];for(let r=0,s=n.length;r<s;++r){const s=n[r];for(c=t[s-i],d=t[s-i+1],a=e;a<s;a+=i)u=t[a],g=t[a+1],(f<=d&&g<=f||d<=f&&f<=g)&&(h=(f-d)/(g-d)*(u-c)+c,p.push(h)),c=u,d=g}let _=NaN,m=-1/0;for(p.sort(D.a),c=p[0],a=1,l=p.length;a<l;++a){u=p[a];const r=Math.abs(u-c);r>m&&(h=(c+u)/2,Object(N.c)(t,e,n,i,h,f)&&(_=h,m=r)),c=u}return isNaN(_)&&(_=r[s]),o?(o.push(_,f,m),o):[_,f,m]}var k=n(58);function z(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function G(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-s)*(i+o),s=n,o=i}return 0===r?void 0:r>0}function U(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=G(t,e,o,i);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function K(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=G(t,e,o,i);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&z(t,e,o,i),e=o}return e}n(44);class Z extends f{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Object(D.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Z(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Object(o.d)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(v(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),b(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Object(N.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return I(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),K(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,j(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Object(o.u)(this.getExtent());this.flatInteriorPoint_=F(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new P(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new S(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=new S(e.slice(r,o),t);i.push(a),r=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;U(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=K(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=R(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new Z(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Object(k.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=C(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}e.a=Z;function Y(t){const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new Z(s,"XY",[s.length])}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l}));var i=n(4),r=n(7),s=n(24);var o=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Object(s.a)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){Object(r.a)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],s=n[t],o=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<i&&n[s]<n[r]?s:r;e[t]=e[o],n[t]=n[o],t=o}e[t]=r,n[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],s=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>s))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let s,o,a;for(o=0;o<r;++o)s=e[o],a=t(s),a==1/0?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=a,e[i++]=s);e.length=i,n.length=i,this.heapify_()}},a=n(3);e.a=class extends o{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(i.a.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===a.a.LOADED||n===a.a.ERROR||n===a.a.EMPTY){n!==a.a.ERROR&&e.removeEventListener(i.a.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==a.a.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,i.load())}};function l(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}},function(t,e,n){"use strict";var i=n(35),r=n(4),s=n(2);class o extends i.a{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.a.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Object(s.a)(this,t[r],e);return i}return Object(s.a)(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=Object(s.b)(this,t[r],e)}else n=Object(s.b)(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Object(s.c)(t[e]);else Object(s.c)(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}o.prototype.on,o.prototype.once,o.prototype.un,e.a=o},function(t,e,n){"use strict";const i={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class r extends Error{constructor(t){const e=i[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));const i={info:1,warn:2,error:3,none:4};let r=i.info;function s(...t){r>i.warn||console.warn(...t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));const i=.5},function(t,e,n){"use strict";var i=n(0),r=n(5),s=n(1);e.a=class{constructor(t,e,n,s,o,a){this.sourceProj_=t,this.targetProj_=e;let l={};const h=Object(r.i)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=s,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Object(i.C)(s)==Object(i.C)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(i.C)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(i.C)(this.targetProj_.getExtent()):null;const c=Object(i.A)(n),u=Object(i.B)(n),d=Object(i.t)(n),g=Object(i.s)(n),f=this.transformInv_(c),p=this.transformInv_(u),_=this.transformInv_(d),m=this.transformInv_(g),v=10+(a?Math.max(0,Math.ceil(Math.log2(Object(i.r)(n)/(a*a*256*256)))):0);if(this.addQuad_(c,u,d,g,f,p,_,m,v),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}})}l={}}addTriangle_(t,e,n,i,r,s){this.triangles_.push({source:[i,r,s],target:[t,e,n]})}addQuad_(t,e,n,r,o,a,l,h,c){const u=Object(i.b)([o,a,l,h]),d=this.sourceWorldWidth_?Object(i.C)(u)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const s=Object(i.b)([t,e,n,r]);p=Object(i.C)(s)/this.targetWorldWidth_>.25||p}!f&&this.sourceProj_.isGlobal()&&d&&(p=d>.25||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Object(i.D)(u,this.maxSourceExtent_))return;let _=0;if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1])))if(c>0)p=!0;else if(_=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=_&&2!=_&&4!=_&&8!=_)return;if(c>0){if(!p){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let r;if(f){r=(Object(s.e)(o[0],g)+Object(s.e)(l[0],g))/2-Object(s.e)(i[0],g)}else r=(o[0]+l[0])/2-i[0];const a=(o[1]+l[1])/2-i[1];p=r*r+a*a>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const i=[(e[0]+n[0])/2,(e[1]+n[1])/2],s=this.transformInv_(i),u=[(r[0]+t[0])/2,(r[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,i,u,o,a,s,d,c-1),this.addQuad_(u,i,n,r,d,s,l,h,c-1)}else{const i=[(t[0]+e[0])/2,(t[1]+e[1])/2],s=this.transformInv_(i),u=[(n[0]+r[0])/2,(n[1]+r[1])/2],d=this.transformInv_(u);this.addQuad_(t,i,u,r,o,s,d,h,c-1),this.addQuad_(i,e,n,u,s,a,l,d,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&_)&&this.addTriangle_(t,n,r,o,l,h),0==(14&_)&&this.addTriangle_(t,n,e,o,l,a),_&&(0==(13&_)&&this.addTriangle_(e,r,t,a,h,o),0==(7&_)&&this.addTriangle_(e,r,n,a,h,l))}calculateSourceExtent(){const t=Object(i.h)();return this.triangles_.forEach((function(e,n,r){const s=e.source;Object(i.o)(t,s[0]),Object(i.o)(t,s[1]),Object(i.o)(t,s[2])})),t}getTriangles(){return this.triangles_}}},function(t,e,n){"use strict";var i=n(14),r=n(10),s=n(6),o=n(7),a=n(1);class l extends i.a{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.a.OPACITY]=void 0!==t.opacity?t.opacity:1,Object(o.a)("number"==typeof e[r.a.OPACITY],64),e[r.a.VISIBLE]=void 0===t.visible||t.visible,e[r.a.Z_INDEX]=t.zIndex,e[r.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.a.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.a.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Object(a.b)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Object(s.a)()}getLayerStatesArray(t){return Object(s.a)()}getExtent(){return this.get(r.a.EXTENT)}getMaxResolution(){return this.get(r.a.MAX_RESOLUTION)}getMinResolution(){return this.get(r.a.MIN_RESOLUTION)}getMinZoom(){return this.get(r.a.MIN_ZOOM)}getMaxZoom(){return this.get(r.a.MAX_ZOOM)}getOpacity(){return this.get(r.a.OPACITY)}getSourceState(){return Object(s.a)()}getVisible(){return this.get(r.a.VISIBLE)}getZIndex(){return this.get(r.a.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.a.EXTENT,t)}setMaxResolution(t){this.set(r.a.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.a.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.a.MAX_ZOOM,t)}setMinZoom(t){this.set(r.a.MIN_ZOOM,t)}setOpacity(t){Object(o.a)("number"==typeof t,64),this.set(r.a.OPACITY,t)}setVisible(t){this.set(r.a.VISIBLE,t)}setZIndex(t){this.set(r.a.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}e.a=l},function(t,e,n){"use strict";var i=n(15);class r extends i.a{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}e.a=r},function(t,e,n){"use strict";var i=n(35),r=n(4),s=n(3),o=n(6),a=n(21);class l extends i.a{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(r.a.CHANGE)}release(){this.state===s.a.ERROR&&this.setState(s.a.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==s.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==s.a.LOADED){t.interimTile=null;break}t.getState()==s.a.LOADING?e=t:t.getState()==s.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==s.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Object(o.a)()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:Object(a.a)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}e.a=l},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i=n(0);var r=n(28);function s(t,e,n,r,s){const o=Object(i.p)(Object(i.h)(),t,e,n,r);return!!Object(i.D)(s,o)&&(!!Object(i.f)(s,o)||(o[0]>=s[0]&&o[2]<=s[2]||(o[1]>=s[1]&&o[3]<=s[3]||function(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}(t,e,n,r,(function(t,e){return Object(i.E)(s,t,e)})))))}function o(t,e,n,i,o){return!!s(t,e,n,i,o)||(!!Object(r.b)(t,e,n,i,o[0],o[1])||(!!Object(r.b)(t,e,n,i,o[0],o[3])||(!!Object(r.b)(t,e,n,i,o[2],o[1])||!!Object(r.b)(t,e,n,i,o[2],o[3]))))}function a(t,e,n,i,a){if(!o(t,e,n[0],i,a))return!1;if(1===n.length)return!0;for(let e=1,o=n.length;e<o;++e)if(Object(r.a)(t,n[e-1],n[e],i,a)&&!s(t,n[e-1],n[e],i,a))return!1;return!0}},function(t,e,n){"use strict";var i=n(57),r=n(3),s=n(11),o=n(4),a=n(43),l=(n(9),n(16)),h=(n(0),n(2));a.a;function c(t,e,n){const i=t;let r=!0,s=!1,a=!1;const c=[Object(h.b)(i,o.a.LOAD,(function(){a=!0,s||e()}))];return i.src&&l.c?(s=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(a?e():n())}))):c.push(Object(h.b)(i,o.a.ERROR,n)),function(){r=!1,c.forEach(h.c)}}class u extends i.a{constructor(t,e,n,i,r,s){super(t,e,s),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.a.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.a.ERROR,this.unlistenImage_(),this.image_=function(){const t=Object(s.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=r.a.LOADED:this.state=r.a.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.a.ERROR&&(this.state=r.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.a.IDLE&&(this.state=r.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=c(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}e.a=u},function(t,e,n){"use strict";var i=n(7);var r=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Object(i.a)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Object(i.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Object(i.a)(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}},s=n(19);e.a=class extends r{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=Object(s.b)(t)[0];this.forEach(t=>{t.tileCoord[0]!==e&&(this.remove(Object(s.c)(t.tileCoord)),t.release())})}}},function(t,e,n){"use strict";var i=n(4),r=n(9),s=n(50),o=n(6);class a extends s.a{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Object(o.a)()}getData(t){return null}prepareFrame(t){return Object(o.a)()}renderFrame(t,e){return Object(o.a)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,r)=>{const s=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,s)}}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===r.a.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=r.a.LOADED&&e!=r.a.ERROR&&t.addEventListener(i.a.CHANGE,this.boundHandleImageChange_),e==r.a.IDLE&&(t.load(),e=t.getState()),e==r.a.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var l=a,h=n(56),c=n(27),u=n(8),d=n(46),g=n(11),f=n(13),p=n(0);let _=null;e.a=class extends l{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Object(u.c)(),this.pixelTransform=Object(u.c)(),this.inversePixelTransform=Object(u.c)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;_||(_=Object(g.a)(1,1,void 0,{willReadFrequently:!0})),_.clearRect(0,0,1,1);try{_.drawImage(t,e,n,1,1,0,0,1,1),i=_.getImageData(0,0,1,1).data}catch(t){return _=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,s;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&Object(f.b)(Object(d.a)(t.style.backgroundColor),Object(d.a)(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",s=Object(g.a)();const e=s.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Object(p.A)(n),r=Object(p.B)(n),s=Object(p.t)(n),o=Object(p.s)(n);Object(u.a)(e.coordinateToPixelTransform,i),Object(u.a)(e.coordinateToPixelTransform,r),Object(u.a)(e.coordinateToPixelTransform,s),Object(u.a)(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;Object(u.a)(a,i),Object(u.a)(a,r),Object(u.a)(a,s),Object(u.a)(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new h.a(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(c.a.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(c.a.POSTRENDER,t,e)}getRenderTransform(t,e,n,i,r,s,o){const a=r/2,l=s/2,h=i/e,c=-h,d=-t[0]+o,g=-t[1];return Object(u.b)(this.tempTransform,a,l,h,c,-n,d,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}},function(t,e,n){"use strict";var i=n(31),r=n(40),s=n(7),o=n(1),a=n(0),l=n(19),h=n(58),c=n(13),u=n(17);const d=[0,0,0];e.a=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(s.a)(Object(c.d)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(s.a)(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Object(a.A)(n)),Object(s.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(s.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.b,Object(s.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const r=new i.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r}),this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let t=i.minX,r=i.maxX;t<=r;++t)for(let r=i.minY,s=i.maxY;r<=s;++r)n([e,t,r])}forEachTileCoordParentTileRange(t,e,n,r){let s,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=Object(i.a)(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,h,n),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],r=2*t[2];return Object(i.a)(n,n+1,r,r+1,e)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(e===r)return Object(i.a)(s,o,s,o,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-r),a=Math.floor(s*t),l=Math.floor(o*t);if(e<r)return Object(i.a)(a,a,l,l,n);const h=Math.floor(t*(s+1))-1,c=Math.floor(t*(o+1))-1;return Object(i.a)(a,h,l,c,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeExtent(t,e,n){const i=this.getOrigin(t),r=this.getResolution(t),s=Object(u.c)(this.getTileSize(t),this.tmpSize_),o=i[0]+e.minX*s[0]*r,l=i[0]+(e.maxX+1)*s[0]*r,h=i[1]+e.minY*s[1]*r,c=i[1]+(e.maxY+1)*s[1]*r;return Object(a.i)(o,h,l,c,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const r=d[1],s=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const o=d[1],a=d[2];return Object(i.a)(r,o,s,a,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Object(u.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Object(u.c)(this.getTileSize(t[0]),this.tmpSize_),s=n[0]+t[1]*r[0]*i,o=n[1]-(t[2]+1)*r[1]*i,l=s+r[0]*i,h=o+r[1]*i;return Object(a.i)(s,o,l,h,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const s=this.getZForResolution(n),a=n/this.getResolution(s),h=this.getOrigin(s),c=Object(u.c)(this.getTileSize(s),this.tmpSize_);let d=a*(t-h[0])/n/c[0],g=a*(h[1]-e)/n/c[1];return i?(d=Object(o.a)(d,5)-1,g=Object(o.a)(g,5)-1):(d=Object(o.c)(d,5),g=Object(o.c)(g,5)),Object(l.a)(s,d,g,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const s=this.getOrigin(n),a=this.getResolution(n),h=Object(u.c)(this.getTileSize(n),this.tmpSize_);let c=(t-s[0])/a/h[0],d=(s[1]-e)/a/h[1];return i?(c=Object(o.a)(c,5)-1,d=Object(o.a)(d,5)-1):(c=Object(o.c)(c,5),d=Object(o.c)(d,5)),Object(l.a)(n,c,d,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=Object(c.e)(this.resolutions_,t,e||0);return Object(o.b)(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Object(h.a)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l}));var i=n(7),r=n(1),s=n(19);function o(t,e){const n=/\{z\}/g,r=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(a,l,h){if(a)return t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(s,a[2].toString()).replace(o,(function(){const t=a[0],n=e.getFullTileRange(t);Object(i.a)(n,55);return(n.getHeight()-a[2]-1).toString()}))}}function a(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=o(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(!e)return;const o=Object(s.e)(e),a=Object(r.e)(o,t.length);return t[a](e,n,i)}}(i)}function l(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}},function(t,e,n){"use strict";var i=n(15),r=n(9),s=n(53),o=n(4),a=n(43),l=n(54),h=n(41),c=n(0),u=n(2);class d extends a.a{constructor(t,e,n,i,o,a,u){const d=t.getExtent(),g=e.getExtent(),f=g?Object(c.y)(n,g):n,p=Object(c.u)(f),_=Object(h.b)(t,e,p,i),m=s.a,v=new l.a(t,e,f,d,_*m,i),y=a(v.calculateSourceExtent(),_,o),b=y?r.a.IDLE:r.a.EMPTY,E=y?y.getPixelRatio():1;super(n,i,E,b),this.targetProj_=e,this.maxSourceExtent_=d,this.triangulation_=v,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=y,this.sourcePixelRatio_=E,this.interpolate_=u,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==r.a.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==r.a.LOADED){const t=Object(c.C)(this.targetExtent_)/this.targetResolution_,e=Object(c.x)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(h.d)(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==r.a.IDLE){this.state=r.a.LOADING,this.changed();const t=this.sourceImage_.getState();t==r.a.LOADED||t==r.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(u.a)(this.sourceImage_,o.a.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=r.a.LOADED&&e!=r.a.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){Object(u.c)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var g=d,f=n(39),p=n(6),_=n(5),m=n(13);const v="imageloadstart",y="imageloadend",b="imageloaderror";class E extends i.a{constructor(t,e){super(t),this.image=e}}class C extends f.a{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){t=e[Object(m.e)(e,t,0)]}return t}getImage(t,e,n,i){const r=this.getProjection();if(!r||!i||Object(_.d)(r,i))return r&&(i=r),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(_.d)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&Object(c.m)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new g(r,i,t,e,n,(t,e,n)=>this.getImageInternal(t,e,n,r),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){return Object(p.a)()}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case r.a.LOADING:this.loading=!0,n=v;break;case r.a.LOADED:this.loading=!1,n=y;break;case r.a.ERROR:this.loading=!1,n=b;break;default:return}this.hasListener(n)&&this.dispatchEvent(new E(n,e))}}e.a=C},function(t,e,n){"use strict";var i=n(43),r=n(9);class s extends i.a{constructor(t,e,n,i,s){super(t,e,n,void 0!==s?r.a.IDLE:r.a.LOADED),this.loader_=void 0!==s?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=r.a.ERROR):this.state=r.a.LOADED,this.changed()}load(){this.state==r.a.IDLE&&(this.state=r.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}e.a=s},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(14),r=n(16),s=n(24),o=n(11),a=n(18);const l=new i.a;let h,c=null;const u={};(function(){const t=["monospace","serif"],e=t.length,n="wmytzilWMYTZIL@#/&?$%10";let i,r;function o(i,s,o){let a=!0;for(let l=0;l<e;++l){const e=t[l];if(r=g(i+" "+s+" 32px "+e,n),o!=e){const t=g(i+" "+s+" 32px "+o+","+e,n);a=a&&t!=r}}return!!a}function a(){let t=!0;const e=l.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];l.get(i)<100&&(o.apply(this,i.split("\n"))?(Object(s.a)(u),c=null,h=void 0,l.set(i,100)):(l.set(i,l.get(i)+1,!0),t=!1))}t&&(clearInterval(i),i=void 0)}})(),function(){let t}();function d(t,e){return c||(c=Object(o.a)(1,1)),t!=h&&(c.font=t,h=c.font),c.measureText(e)}function g(t,e){return d(t,e).width}},function(t,e,n){"use strict";var i=n(25);class r extends i.a{constructor(t){super(t=t||{})}}var s=r,o=n(61),a=n(9),l=n(20),h=n(8),c=n(0),u=n(5);class d extends o.a{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,r=i.resolution,s=this.getLayer().getSource(),o=t.viewHints;let h=t.extent;if(void 0!==e.extent&&(h=Object(c.y)(h,Object(u.f)(e.extent,i.projection))),!o[l.a.ANIMATING]&&!o[l.a.INTERACTING]&&!Object(c.F)(h))if(s){const t=i.projection,e=s.getImage(h,r,n,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===a.a.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Object(h.a)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Object(c.e)(r,i))return null;const s=this.image_.getExtent(),o=this.image_.getImage(),a=Object(c.C)(s),l=Math.floor(o.width*((i[0]-s[0])/a));if(l<0||l>=o.width)return null;const u=Object(c.x)(s),d=Math.floor(o.height*((s[3]-i[1])/u));return d<0||d>=o.height?null:this.getImageData(o,l,d)}renderFrame(t,e){const n=this.image_,i=n.getExtent(),r=n.getResolution(),s=n.getPixelRatio(),o=t.layerStatesArray[t.layerIndex],a=t.pixelRatio,l=t.viewState,d=l.center,g=a*r/(l.resolution*s),f=t.extent,p=l.resolution,_=l.rotation,m=Math.round(Object(c.C)(f)/p*a),v=Math.round(Object(c.x)(f)/p*a);Object(h.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,_,-m/2,-v/2),Object(h.d)(this.inversePixelTransform,this.pixelTransform);const y=Object(h.e)(this.pixelTransform);this.useContainer(e,y,this.getBackground(t));const b=this.context,E=b.canvas;E.width!=m||E.height!=v?(E.width=m,E.height=v):this.containerReused||b.clearRect(0,0,m,v);let C=!1,w=!0;if(o.extent){const e=Object(u.f)(o.extent,l.projection);w=Object(c.D)(e,t.extent),C=w&&!Object(c.f)(e,t.extent),C&&this.clipUnrotated(b,t,e)}const O=n.getImage(),x=Object(h.b)(this.tempTransform,m/2,v/2,g,g,0,s*(i[0]-d[0])/r,s*(d[1]-i[3])/r);this.renderedResolution=r*a/s;const R=O.width*x[0],T=O.height*x[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,t),w&&R>=.5&&T>=.5){const t=x[4],e=x[5],n=o.opacity;let i;1!==n&&(i=b.globalAlpha,b.globalAlpha=n),b.drawImage(O,0,0,+O.width,+O.height,t,e,R,T),1!==n&&(b.globalAlpha=i)}return this.postRender(b,t),C&&b.restore(),b.imageSmoothingEnabled=!0,y!==E.style.transform&&(E.style.transform=y),this.container}}var g=d;e.a=class extends s{constructor(t){super(t)}createRenderer(){return new g(this)}getData(t){return super.getData(t)}}},,function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(71),r=n(72),s=n(73);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return h(this,t,e,n)}function h(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|g(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(c(e),t=a(t,e<0?0:0|g(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|g(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function g(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return G(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return R(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return j(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function _(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var s,o=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,a/=2,l/=2,n/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){var c=-1;for(s=n;s<a;s++)if(h(t,s)===h(e,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){for(var u=!0,d=0;d<l;d++)if(h(t,s+d)!==h(e,d)){u=!1;break}if(u)return s}return-1}function y(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[n+o]=a}return o}function b(t,e,n,i){return K(G(e,t.length-n),t,n,i)}function E(t,e,n,i){return K(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function C(t,e,n,i){return E(t,e,n,i)}function w(t,e,n,i){return K(U(e),t,n,i)}function O(t,e,n,i){return K(function(t,e){for(var n,i,r,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(e,t.length-n),t,n,i)}function x(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function R(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,o,a,l,h=t[r],c=null,u=h>239?4:h>223?3:h>191?2:1;if(r+u<=n)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(s=t[r+1]))&&(l=(31&h)<<6|63&s)>127&&(c=l);break;case 3:s=t[r+1],o=t[r+2],128==(192&s)&&128==(192&o)&&(l=(15&h)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=t[r+1],o=t[r+2],a=t[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&h)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=o(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return h(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):p.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0),a=Math.min(s,o),h=this.slice(i,r),c=t.slice(e,n),u=0;u<a;++u)if(h[u]!==c[u]){s=h[u],o=c[u];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return C(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function j(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function L(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=e;s<n;++s)r+=z(t[s]);return r}function I(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,i,r,s){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function A(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function P(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);r<s;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function D(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,s){return s||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function F(t,e,n,i,s){return s||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},l.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);S(this,t,e,n,r-1,-r)}var s=0,o=1,a=0;for(this[e]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);S(this,t,e,n,r-1,-r)}var s=n-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&n<e&&e<i)for(r=s-1;r>=0;--r)t[r+e]=this[r+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var o=l.isBuffer(t)?t:G(new l(t,i).toString()),a=o.length;for(s=0;s<n-e;++s)this[s+e]=o[s%a]}return this};var k=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var n;e=e||1/0;for(var i=t.length,r=null,s=[],o=0;o<i;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function U(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(70))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=h(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=h(t),o=i[0],a=i[1],l=new s(function(t,e,n){return 3*(e+n)/4-n}(0,o,a)),c=0,u=a>0?o-4:o;for(n=0;n<u;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(c(t,o,o+16383>a?a:o+16383));1===r?(e=t[n-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return s.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)i[a]=o[a],r[o.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,s,o=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,h=l>>1,c=-7,u=n?r-1:0,d=n?-1:1,g=t[e+u];for(u+=d,s=g&(1<<-c)-1,g>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=256*o+t[e+u],u+=d,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,i),s-=h}return(g?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,a,l,h=8*s-r-1,c=(1<<h)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:s-1,f=i?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[n+g]=255&a,g+=f,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;t[n+g]=255&o,g+=f,o/=256,h-=8);t[n+g-f]|=128*p}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";n.r(e);var i=n(79),r=n(38),s=n(34),o=n(4),a=n(59),l=n(47),h=n(60),c=n(3),u="tileloadstart",d="tileloadend",g="tileloaderror",f=n(45),p=n(63),_=n(19),m=n(6);class v extends f.b{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===v.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=Object(m.b)(e),i=e.getState();let r;i==c.a.LOADING?(this.tileLoadingKeys_[n]=!0,r=u):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==c.a.ERROR?g:i==c.a.LOADED?d:void 0),null!=r&&this.dispatchEvent(new f.a(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=Object(p.b)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(p.a)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=Object(_.d)(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}var y=v,b=n(5),E=n(37);function C(t,e){t.getImage().src=e}var w=class extends y{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:C,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:a.a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const t in this.tileCacheForProjection){const i=this.tileCacheForProjection[t];i.expireCache(i==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Object(b.d)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!Object(b.d)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Object(b.d)(e,t)))return this.tileGrid;const n=Object(m.b)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Object(E.c)(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Object(b.d)(e,t))return this.tileCache;const n=Object(m.b)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new h.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,r,s){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,r),h=l?this.tileUrlFunction(l,i,r):void 0,u=new this.tileClass(a,void 0!==h?c.a.IDLE:c.a.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=s,u.addEventListener(o.a.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,n,i,r){const s=this.getProjection();if(!s||!r||Object(b.d)(s,r))return this.getTileInternal(t,e,n,i,s||r);const o=this.getTileCacheForProjection(r),a=[t,e,n];let h;const c=Object(_.c)(a);o.containsKey(c)&&(h=o.get(c));const u=this.getKey();if(h&&h.key==u)return h;const d=this.getTileGridForProjection(s),g=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(a,r),p=new l.a(s,d,r,g,a,f,this.getTilePixelRatio(i),this.getGutter(),(t,e,n,i)=>this.getTileInternal(t,e,n,i,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return p.key=u,h?(p.interimTile=h,p.refreshInterimChain(),o.replace(c,p)):o.set(c,p),p}getTileInternal(t,e,n,i,r){let s=null;const o=Object(_.d)(t,e,n),a=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=a){const l=s;s=this.createTile_(t,e,n,i,r,a),l.getState()==c.a.IDLE?s.interimTile=l.interimTile:s.interimTile=l,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,n,i,r,a),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=Object(b.g)(t);if(n){const t=Object(m.b)(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};var O=n(0),x=n(1),R=n(17);var T=class extends w{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=t.params||{},this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(O.h)(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,n,i,r,s){const o=this.urls;if(!o)return;const a=r.getCode().split(/:(?=\d+$)/).pop();let l;if(s.SIZE=e[0]+","+e[1],s.BBOX=n.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*i:90*i),1==o.length)l=o[0];else{l=o[Object(x.e)(Object(_.e)(t),o.length)]}return function(t,e){const n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));const i=n.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+i}(l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),s)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,n){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return;1==e||this.hidpi_||(e=1);const r=i.getTileCoordExtent(t,this.tmpExtent_);let s=Object(R.c)(i.getTileSize(t[0]),this.tmpSize);1!=e&&(s=Object(R.b)(s,e,this.tmpSize));const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(o,this.params_),this.getRequestUrl_(t,s,r,e,n,o)}};var j=class extends w{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:Object(E.a)({extent:Object(E.b)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};var L=class extends j{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}};ol.control.Bar;var I=class extends ol.control.Bar{constructor(t){super(t),t||(t={});let e=this;this.controls_=[],this.clonedMap_,this.clonedLayer_,this.rightLayer_,this.leftLayer_,this.useCloneLayer_=!1,this.layerGroup_,this.vSwipeControl_,this.hSwipeControl_,new ol.control.Bar(this,{group:!0,toggleOne:!0,className:t.className,controls:this.controls_});let n=t.controlNames||["hSlider","vSlider","scope","clipLayer","doubleMap"];t.rightLayer&&(this.rightLayer_=t.rightLayer),t.leftLayer&&(this.leftLayer_=t.leftLayer),t.layerGroup&&(this.layerGroup_=t.layerGroup),this.useCloneLayer_=!0===t.useCloneLayer&&t.useCloneLayer;for(let t=0;t<n.length;t++){let i=n[t];if("vSlider"===i){let t=new ol.control.Toggle({html:'<i class="fa fa-arrows-v"></i>',className:"vertical-button",title:"Comparaison verticale",active:!1});t.set("name",i+"Toggle"),t.on("change:active",(function(t){e.onVerticalControlChange_(t,e)})),this.addControl(t)}else if("hSlider"===i){let t=new ol.control.Toggle({html:'<i class="fa fa-arrows-h"></i>',className:"horizontal-button",title:"Comparaison horizontale",active:!1});t.set("name",i+"Toggle"),t.on("change:active",(function(t){e.onHorizontalControlChange_(t,e)})),this.addControl(t)}else if("scope"===i){let t=new ol.control.Toggle({html:'<i class="fa fa-circle-o"></i>',className:"scope-button",name:"scope",title:"Loupe",active:!1});t.set("name",i+"Toggle"),t.on("change:active",(function(t){e.onScopeControlChange_(t,e)})),this.addControl(t)}else if("clipLayer"===i){let t=new ol.control.Toggle({html:'<i class="fa fa-eye"></i>',className:"clipLayer-button",title:"Masquer",active:!1});t.set("name",i+"Toggle"),t.on("change:active",(function(t){e.onClipLayerControlChange_(t,e)})),this.addControl(t)}else if("doubleMap"===i){let t=new ol.control.Toggle({html:'<i class="fa fa-pause"></i>',className:"doubleMap-button",name:"doubleMap",title:"Double affichage",active:!1});t.set("name",i+"Toggle"),t.on("change:active",(function(t){e.onDoubleMapControlChange_(t,e)})),this.addControl(t)}}}setMap(t){if(super.setMap(t),this.layerGroup_||(this.layerGroup_=this.getMap().getLayerGroup()),this.getControl("doubleMapToggle")){let e=t.getViewport().parentElement,n=e.id;if(void 0===n)throw new EvalError("ol.Map div must have an id.");let i=document.createElement("div");i.id=n+"-cloned",i.hidden=!0,e.parentElement.appendChild(i),t.clonedMap_=new ol.Map({target:i,view:t.getView(),controls:[new ol.control.Zoom({zoomInTipLabel:"Zoom avant",zoomOutTipLabel:"Zoom arrière"}),new ol.control.Rotate,new ol.control.Attribution]}),t.addInteraction(new ol.interaction.Synchronize({maps:[t.clonedMap_]})),t.clonedMap_.addInteraction(new ol.interaction.Synchronize({maps:[t]}))}}getControl(t){for(let e=0;e<this.getControls().length;e++)if(this.getControls()[e].get("name")===t)return this.getControls()[e]}onVerticalControlChange_(t){t.active?(this.vSwipeControl_=new ol.control.Swipe({layers:this.getLeftLayer(),rightLayers:this.getRightLayer(),orientation:"vertical"}),this.vSwipeControl_.set("name","vSlider"),this.getMap().addControl(this.vSwipeControl_)):this.vSwipeControl_&&(this.getMap().removeControl(this.vSwipeControl_),this.vSwipeControl_=void 0)}onHorizontalControlChange_(t){t.active?(this.hSwipeControl_=new ol.control.Swipe({layers:this.getLeftLayer(),rightLayers:this.getRightLayer(),orientation:"horizontal"}),this.hSwipeControl_.set("name","hSlider"),this.getMap().addControl(this.hSwipeControl_)):this.hSwipeControl_&&(this.getMap().removeControl(this.hSwipeControl_),this.hSwipeControl_=void 0)}onScopeControlChange_(t){let e=this.getControl("scopeToggle");t.active?(e.setInteraction(new ol.interaction.Clip({radius:200})),this.getMap().addInteraction(e.getInteraction()),e.getInteraction().addLayer(this.getRightLayer())):e.getInteraction()&&(e.getInteraction().removeLayer(this.getRightLayer()),this.getMap().removeInteraction(e.getInteraction()),e.setInteraction())}onClipLayerControlChange_(t){let e=this.getControl("clipLayerToggle");t.active?(this.getRightLayer().setVisible(!1),e.element.getElementsByClassName("fa")[0].className="fa fa-eye-slash"):(this.useCloneLayer_?"doubleMap"!==this.getDisplayMode()&&this.getRightLayer().setVisible(!0):this.getRightLayer().setVisible(!0),e.element.getElementsByClassName("fa")[0].className="fa fa-eye")}onDoubleMapControlChange_(t){let e=this.getMap().getViewport().parentElement,n=this.getMap().clonedMap_.getViewport().parentElement;t.active?(n.style.float="left",n.style.width="50%",e.style.width="50%",e.style.float="left",n.style.display="block",n.style.height=e.clientHeight+"px",this.useCloneLayer_?(this.clonedLayer_=new ol.layer.Tile(this.getRightLayer().getProperties()),this.clonedLayer_.setVisible(!0),this.getRightLayer().setVisible(!1),this.getRightLayer().on("change",this.updateClonedLayer_,this),this.getClonedMap().addLayer(this.clonedLayer_)):(this.getRightLayer().setVisible(!0),this.layerGroup_.getLayers().remove(this.getRightLayer()),this.getClonedMap().addLayer(this.getRightLayer())),this.getMap().updateSize(),this.getClonedMap().updateSize()):(n.style.display="none",n.style.width="100%",e.style.width="100%",this.useCloneLayer_?(this.getClonedMap().removeLayer(this.clonedLayer_),"clipLayer"!==this.getDisplayMode()&&this.getRightLayer().setVisible(!0),this.getRightLayer().un("change",this.updateClonedLayer_,this)):("clipLayer"!==this.getDisplayMode()&&this.getRightLayer().setVisible(!0),this.getClonedMap().removeLayer(this.getRightLayer()),this.layerGroup_.getLayers().push(this.getRightLayer()))),this.getMap().updateSize()}setDisplayMode(t){if(!this.getMap())throw new EvalError("control must be added to map before setting displayMode.");"vSlider"===t?this.getControl("vSliderToggle").setActive(!0):"hSlider"===t?this.getControl("hSliderToggle").setActive(!0):"scope"===t?this.getControl("scopeToggle").setActive(!0):"clipLayer"===t?this.getControl("clipLayerToggle").setActive(!0):"doubleMap"===t&&this.getControl("doubleMapToggle").setActive(!0)}getDisplayMode(){for(let t=0;t<this.getControls().length;t++)if(this.getControls()[t].getActive())return this.getControls()[t].get("name").substring(0,this.getControls()[t].get("name").length-6);return"normal"}setRightLayer(t){if(!this.getMap())throw new EvalError("control must be added to map before setting rightLayer.");if("vSlider"===this.getDisplayMode()){let e;this.getMap().getControls().forEach((function(t){"vSlider"===t.get("name")&&(e=t)})),e.removeLayer(this.getRightLayer()),e.addLayer(t,!0)}else if("hSlider"===this.getDisplayMode()){let e;this.getMap().getControls().forEach((function(t){"hSlider"===t.get("name")&&(e=t)})),e.removeLayer(this.getRightLayer()),e.addLayer(t,!0)}else if("clipLayer"===this.getDisplayMode())t.setVisible(this.getRightLayer().getVisible());else if("scope"===this.getDisplayMode()){let e=this.getControl("scopeToggle").getInteraction();e.removeLayer(this.getRightLayer()),e.addLayer(t)}else if("doubleMap"===this.getDisplayMode())if(this.useCloneLayer_)this.clonedLayer_.setProperties(t.getProperties()),this.getRightLayer().on("change",this.updateClonedLayer_,this),this.getRightLayer().setVisible(!1);else{this.getRightLayer().setVisible(!0),this.layerGroup_.getLayers().remove(t);let e=this;this.getClonedMap().getLayers().forEach((function(n,i){n===e.getRightLayer()&&e.getClonedMap().getLayers().setAt(i,t)}))}this.rightLayer_=t}updateClonedLayer_(){this.clonedLayer_.setProperties(this.getRightLayer().getProperties()),this.clonedLayer_.setVisible(!0)}setLeftLayer(t){if(!this.getMap())throw new EvalError("control must be added to map before setting leftLayer.");if("vSlider"===this.getDisplayMode()){let t;this.getMap().getControls().forEach((function(e){"vSlider"===e.get("name")&&(t=e)})),t&&t.addLayer(this.getLeftLayer())}else if("hSlider"===this.getDisplayMode()){let t;this.getMap().getControls().forEach((function(e){"hSlider"===e.get("name")&&(t=e)})),t&&t.addLayer(this.getLeftLayer())}else if("clipLayer"===this.getDisplayMode())t.setVisible(this.getLeftLayer().getVisible());else if("scope"===this.getDisplayMode());else if("doubleMap"===this.getDisplayMode()){let e=this;this.getMap().getLayers().forEach((function(n,i){n===e.getLeftLayer()&&e.getMap().getLayers().setAt(i,t)}))}this.leftLayer_=t}getRightLayer(){return this.rightLayer_}getLeftLayer(){return this.leftLayer_}getClonedMap(){return this.getMap().clonedMap_}setLayerGroup(t){this.layerGroup_=t}getLayerGroup(){return this.layerGroup_}getVSwipeControl(){return this.vSwipeControl_}getHSwipeControl(){return this.hSwipeControl_}},M=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},S=n(33),A=n(78),P=n(67);window.ol&&!ol.ext&&(ol.ext={});var D=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t};window.ol&&(ol.inherits||(ol.inherits=D)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var N=D,F=n(14);window.ol&&(ol.ext.input={});var k=function(t){t=t||{},F.a.call(this);var e,n=this.input=t.input;n||(n=this.input=document.createElement("INPUT"),t.type&&n.setAttribute("type",t.type),void 0!==t.min&&n.setAttribute("min",t.min),void 0!==t.max&&n.setAttribute("max",t.max),void 0!==t.step&&n.setAttribute("step",t.step),t.parent&&t.parent.appendChild(n)),t.disabled&&(n.disabled=!0),void 0!==t.checked&&(n.checked=!!t.checked),void 0!==t.val&&(n.value=t.val),t.hidden&&(n.style.display="none"),n.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),n.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))};N(k,F.a),k.prototype._listenDrag=function(t,e){var n=function(n){this.moving=!0,this.element.classList.add("ol-moving");var i=function(n){"pointerup"===n.type&&(document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",i),document.removeEventListener("pointercancel",i),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),n.target===t&&e(n),n.stopPropagation(),n.preventDefault()}.bind(this);document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",i,!1),document.addEventListener("pointercancel",i,!1),n.stopPropagation(),n.preventDefault()}.bind(this);t.addEventListener("mousedown",n,!1),t.addEventListener("touchstart",n,!1)},k.prototype.setValue=function(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))},k.prototype.getValue=function(){return this.input.value},k.prototype.getInputElement=function(){return this.input};var z=k,G=function(t){t=t||{},z.call(this,t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};N(G,z),G.prototype.isChecked=function(){return this.input.checked};var U=G,K=function(t){t=t||{},U.call(this,t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()};N(K,U);var Z=K,Y=function(t){t=t||{},U.call(this,t),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()};N(Y,U);var B=Y,V={create:function(t,e){var n;if(e=e||{},"TEXT"===t)n=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(n);else for(var i in n=document.createElement(t),/button/i.test(t)&&n.setAttribute("type","button"),e)switch(i){case"className":e.className&&e.className.trim&&n.setAttribute("class",e.className.trim());break;case"text":n.innerText=e.text;break;case"html":e.html instanceof Element?n.appendChild(e.html):void 0!==e.html&&(n.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(n);break;case"options":if(/select/i.test(t))for(var r in e.options)V.create("OPTION",{html:r,value:e.options[r],parent:n});break;case"style":V.setStyle(n,e.style);break;case"change":case"click":V.addListener(n,i,e[i]);break;case"on":for(var s in e.on)V.addListener(n,s,e.on[s]);break;case"checked":n.checked=!!e.checked;break;default:n.setAttribute(i,e[i])}return n},createSwitch:function(t){var e=V.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),n=Object.assign({input:e},t||{});return new Z(n),e},createCheck:function(t){var e=V.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent}),n=Object.assign({input:e},t||{});return"radio"===t.type?new B(n):new U(n),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,n,i){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,n,i)}))},removeListener:function(t,e,n){"string"==typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,n)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===V.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var n in e)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof e[n]?t.style[n]=e[n]+"px":t.style[n]=e[n];break;default:t.style[n]=e[n]}},getStyle:function(t,e){var n,i=(t.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=i.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),n=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(e){var n=t.style.left,i=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=n,t.runtimeStyle.left=i,e}(n);return/px$/.test(n)?parseInt(n):n},outerHeight:function(t){return t.offsetHeight+V.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+V.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},n=function(t){if(!t)return e;if("absolute"===V.getStyle(t,"position")&&"none"!==V.getStyle(t,"transform")){var i=t.getBoundingClientRect();return e.left+=i.left,e.top+=i.top,e}return n(t.offsetParent)};return n(t.offsetParent)},positionRect:function(t,e){var n=0,i=0,r=function(s){if(s)return n+=s.offsetLeft,i+=s.offsetTop,r(s.offsetParent);var o={top:t.offsetTop+i,left:t.offsetLeft+n};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+t.offsetHeight,o.right=o.top+t.offsetWidth,o};return r(t.offsetParent)},scrollDiv:function(t,e){var n,i,r,s,o,a=!1,l=0,h=0,c="function"==typeof(e=e||{}).onmove?e.onmove:function(){},u=e.vertical?"screenY":"screenX",d=e.vertical?"scrollTop":"scrollLeft",g=!1,f=0,p=function(){o&&(f++,setTimeout(_))},_=function(){if(o){if(--f)return;var e=t.clientHeight,n=t.scrollHeight;i=e/n,o.style.height=100*i+"%",o.style.top=t.scrollTop/n*100+"%",s.style.height=e+"px",e>n-.5?s.classList.add("ol-100pc"):s.classList.remove("ol-100pc")}},m=function(e){e.target.classList.contains("ol-noscroll")||(g=!1,a=e[u],h=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",v),V.addListener(window,["pointerup","pointercancel"],E))},v=function(e){if(g=!0,!1!==a){var s=(r?-1/i:1)*(a-e[u]);t[d]+=s,(n=new Date)-h&&(l=(l+s/(n-h))/2),a=e[u],h=n,s&&c(!0)}},y=function(e){var n=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=n,t[d]+=n,-1<e&&e<1?(g?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),g=!1,c(!1)):setTimeout((function(){y(e)}),40)};if(e.vertical&&e.minibar){var b=function(n){t.removeEventListener("pointermove",b),t.parentNode.classList.add("ol-miniscroll"),o=V.create("DIV"),s=V.create("DIV",{className:"ol-scroll",html:o}),t.parentNode.insertBefore(s,t),o.addEventListener("pointerdown",(function(t){r=!0,m(t)})),e.mousewheel&&(V.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){C(t)})),V.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){C(t)}))),t.parentNode.addEventListener("pointerenter",p),window.addEventListener("resize",p),!1!==n&&p()};t.parentNode?b(!1):t.addEventListener("pointermove",b),t.addEventListener("scroll",(function(){p()}))}t.style["touch-action"]="none",t.style.overflow="hidden",t.classList.add("ol-scrolldiv"),V.addListener(t,["pointerdown"],(function(t){r=!1,m(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var E=function(n){(h=new Date-h)>100||r?l=0:h>0&&(l=((l||0)+(a-n[u])/h)/2),y(!1===e.animate?0:200*l),a=!1,l=0,h=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),r=!1,window.removeEventListener("pointermove",v),V.removeListener(window,["pointerup","pointercancel"],E)},C=function(e){var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[d]-=30*n,t.classList.remove("ol-move"),!1};return e.mousewheel&&V.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],C),{refresh:p}},dispatchEvent:function(t,e){var n;try{n=new CustomEvent(t)}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{})}e.dispatchEvent(n)}},X=V,H=function(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control";var n=this,i=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");i.type="button",t.title&&(i.title=t.title),t.name&&(i.name=t.name),t.html instanceof Element?i.appendChild(t.html):i.innerHTML=t.html||"";i.addEventListener("click",(function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(n,e)})),e.appendChild(i),!t.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),S.a.call(this,{element:e,target:t.target}),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)};N(H,S.a),H.prototype.setVisible=function(t){t?X.show(this.element):X.hide(this.element)},H.prototype.setTitle=function(t){this.button_.setAttribute("title",t)},H.prototype.setHtml=function(t){X.setHTML(this.button_,t)},H.prototype.getButtonElement=function(){return this.button_};var W=H,q=function(t){t=t||{};var e=this;this.interaction_=t.interaction,this.interaction_&&(this.interaction_.setActive(t.active),this.interaction_.on("change:active",(function(){e.setActive(e.interaction_.getActive())}))),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",W.call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&this.setSubBar(t.bar),this.setActive(t.active),this.setDisable(t.disable)};N(q,W),q.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),W.prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},q.prototype.getSubBar=function(){return this.subbar_},q.prototype.setSubBar=function(t){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=t,t&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))},q.prototype.getDisable=function(){var t=this.element.querySelector("button");return t&&t.disabled},q.prototype.setDisable=function(t){this.getDisable()!=t&&(this.element.querySelector("button").disabled=t,t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))},q.prototype.getActive=function(){return this.element.classList.contains("ol-active")},q.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},q.prototype.setActive=function(t){this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.getActive()!==t&&(t?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))},q.prototype.setInteraction=function(t){this.interaction_=t},q.prototype.getInteraction=function(){return this.interaction_};var Q=q;const $=function(t){t||(t={}),this.layer1_=t.layer1,this.layer2_=t.layer2,this.classCount_=t.classCount?t.classCount:1e3,this.layerProcessed_={},this.active_=!1,Q.call(this,{html:'<i class="fa fa-bar-chart"></i>',className:"ol-histogram-matching",title:"Adaptation d'histogramme",active:!1})};M($,Q),$.prototype.setMap=function(t){S.a.prototype.setMap.call(this,t),this.on("change:active",this.onToggle_)},$.prototype.onToggle_=function(t){let e=this;if(!0===e.getActive()){let t=new A.a({sources:[e.layer1_.getSource(),e.layer2_.getSource()],operationType:"image",operation:e.rasterOperation_,lib:{computeHistogram:e.computeHistogram_,getInverseClassIndex:e.getInverseClassIndex_,getInverseValue:e.getInverseValue_,classCount:e.classCount_}});e.layerProcessed_=new P.a({source:t,name:"processedLayer"}),e.getMap().addLayer(e.layerProcessed_),e.getMap().on("moveend",(function(){t.changed()}))}else e.getMap().removeLayer(e.layerProcessed_),e.getMap().render()},$.prototype.rasterOperation_=function(t,e){let n=t[0],i=t[1],r=computeHistogram(i),s=computeHistogram(n);if(0===s.count||void 0===r||0===r.count)return{data:n.data,width:n.width,height:n.height};let o=n.width,a=n.height,l=n.data,h=new Uint8ClampedArray(l.length);for(let t=0,e=0;t<a;++t){for(let t=0;t<o;++t,e+=4){let t=l[e],n=l[e+1],i=l[e+2],o=(l[e+3],e);h[o]=getInverseValue(s.cumulative_red[Math.round(Math.max(0,Math.min(255,t)))],r.inverse_red),h[o+1]=getInverseValue(s.cumulative_green[Math.round(Math.max(0,Math.min(255,n)))],r.inverse_green),h[o+2]=getInverseValue(s.cumulative_blue[Math.round(Math.max(0,Math.min(255,i)))],r.inverse_blue),h[o+3]=255}}return{data:h,width:o,height:a}},$.prototype.setLayer1=function(t){this.layer1_=t},$.prototype.setLayer2=function(t){this.layer2_=t},$.prototype.getInverseClassIndex_=function(t){let e=Math.floor(t*classCount);return e=Math.max(0,Math.min(e,classCount-1)),e},$.prototype.getInverseValue_=function(t,e){if(null==e)throw"inverse values cannot be undefined";let n=getInverseClassIndex(t);if(null==e[n]){let t=n-1;for(;t>=0&&null==e[t];)t--;t<0&&(t=null);let i=n+1;for(;i<classCount&&null==e[i];)i++;if(i>=classCount&&(i=null),null==t)for(let t=0;t<i;t++)e[t]=e[i];else if(null==i)for(let n=t+1;n<classCount;n++)e[n]=e[t];else for(let n=t+1;n<i;n++){let r=(n-t)/(i-t);e[n]=(1-r)*e[t]+r*e[i]}}return e[n]},$.prototype.computeHistogram_=function(t){let e={red:new Array(256),cumulative_red:new Array(256),inverse_red:new Array(classCount),green:new Array(256),cumulative_green:new Array(256),inverse_green:new Array(classCount),blue:new Array(256),cumulative_blue:new Array(256),inverse_blue:new Array(classCount),count:0};for(let t=0;t<256;t++)e.red[t]=e.green[t]=e.blue[t]=0;let n=t.data,i=t.width,r=t.height;for(let t=0,s=0;t<r;++t){for(let t=0;t<i;++t,s+=4)e.red[n[s]]+=1,e.green[n[s+1]]+=1,e.blue[n[s+2]]+=1,e.count++}if(e.count<1e-4)throw"Cannot compute cumulative histogram. Count is quite zero...";e.cumulative_red[0]=e.red[0]/e.count,e.cumulative_green[0]=e.green[0]/e.count,e.cumulative_blue[0]=e.blue[0]/e.count;for(let t=1;t<256;t++)e.cumulative_red[t]=e.cumulative_red[t-1]+e.red[t]/e.count,e.cumulative_green[t]=e.cumulative_green[t-1]+e.green[t]/e.count,e.cumulative_blue[t]=e.cumulative_blue[t-1]+e.blue[t]/e.count;for(let t=0;t<classCount;t++)e.inverse_red[t]=e.inverse_green[t]=e.inverse_blue[t]=null;for(let t=0;t<255;t++)e.inverse_red[getInverseClassIndex(e.cumulative_red[t])]=t,e.inverse_green[getInverseClassIndex(e.cumulative_green[t])]=t,e.inverse_blue[getInverseClassIndex(e.cumulative_blue[t])]=t;return e},$.prototype.getLayerProcessed=function(){return this.layerProcessed_};var J=$,tt=new s.a({source:new T({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",crossOrigin:"anonymous"})}),et=new s.a({source:new L}),nt=new i.a({target:window.document.getElementById("map"),layers:[tt,et],view:new r.a({center:[653600,5723680],zoom:5})}),it=new I({leftLayer:tt,rightLayer:et}),rt=new J({layer1:tt,layer2:et});nt.addControl(it),nt.addControl(rt),it.setDisplayMode("doubleMap"),window.changeLeftLayer=function(){var t,e=document.getElementById("leftLayerSelect").value;"osm"==e?t=new s.a({source:new L}):"arcgis"==e&&(t=new s.a({source:new T({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",crossOrigin:"anonymous"})})),nt.getLayers().setAt(0,t),it.setLeftLayer(t)},window.changeRightLayer=function(){var t,e=document.getElementById("rightLayerSelect").value;"osm"==e?t=new s.a({source:new L}):"arcgis"==e&&(t=new s.a({source:new T({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",crossOrigin:"anonymous"})})),nt.getLayers().setAt(1,t),it.setRightLayer(t)}},,,,function(t,e,n){"use strict";(function(t){var i=n(36),r=n(15),s=n(4),o=n(65),a=n(67),l=n(64),h=n(39),c=n(34),u=n(49),d=n(45),g=n(11),f=n(8),p=n(0),_=n(6);let m,v=!0;try{new ImageData(10,10)}catch(t){v=!1}function y(t){let e=!0;try{new ImageData(10,10)}catch(t){e=!1}function n(t,n,i){return e?new ImageData(t,n,i):{data:t,width:n,height:i}}return function(e){const i=e.buffers,r=e.meta,s=e.imageOps,o=e.width,a=e.height,l=i.length,h=i[0].byteLength;if(s){const e=new Array(l);for(let t=0;t<l;++t)e[t]=n(new Uint8ClampedArray(i[t]),o,a);return t(e,r).data.buffer}const c=new Uint8ClampedArray(h),u=new Array(l),d=new Array(l);for(let t=0;t<l;++t)u[t]=new Uint8ClampedArray(i[t]),d[t]=[0,0,0,0];for(let e=0;e<h;e+=4){for(let t=0;t<l;++t){const n=u[t];d[t][0]=n[e],d[t][1]=n[e+1],d[t][2]=n[e+2],d[t][3]=n[e+3]}const n=t(d,r);c[e]=n[0],c[e+1]=n[1],c[e+2]=n[2],c[e+3]=n[3]}return c.buffer}}function b(e,n){const i=Object.keys(e.lib||{}).map((function(t){return"const "+t+" = "+e.lib[t].toString()+";"})).concat(["const __minion__ = ("+y.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+t.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return r.addEventListener("message",n),r}class E extends i.a{constructor(t){let e;super(),this._imageOps=!!t.imageOps,e=0===t.threads?0:this._imageOps?1:t.threads||1;const n=new Array(e);if(e)for(let i=0;i<e;++i)n[i]=b(t,this._onWorkerMessage.bind(this,i));else n[0]=function(t,e){const n=y(t.operation);let i=!1;return{postMessage:function(t){setTimeout((function(){i||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){i=!0}}}(t,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()}_enqueue(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const t=this._queue.shift();this._job=t;const e=t.inputs[0].width,n=t.inputs[0].height,i=t.inputs.map((function(t){return t.data.buffer})),r=this._workers.length;if(this._running=r,1===r)return void this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:n},i);const s=t.inputs[0].data.length,o=4*Math.ceil(s/4/r);for(let s=0;s<r;++s){const r=s*o,a=[];for(let t=0,e=i.length;t<e;++t)a.push(i[t].slice(r,r+o));this._workers[s].postMessage({buffers:a,meta:t.meta,imageOps:this._imageOps,width:e,height:n},a)}}_onWorkerMessage(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const t=this._job,e=this._workers.length;let n,i;if(1===e)n=new Uint8ClampedArray(this._dataLookup[0].buffer),i=this._dataLookup[0].meta;else{const r=t.inputs[0].data.length;n=new Uint8ClampedArray(r),i=new Array(e);const s=4*Math.ceil(r/4/e);for(let t=0;t<e;++t){const e=this._dataLookup[t].buffer,r=t*s;n.set(new Uint8ClampedArray(e),r),i[t]=this._dataLookup[t].meta}}this._job=null,this._dataLookup={},t.callback(null,function(t,e,n){if(v)return new ImageData(t,e,n);m||(m=document.createElement("canvas").getContext("2d"));const i=m.createImageData(e,n);return i.data.set(t),i}(n,t.inputs[0].width,t.inputs[0].height),i),this._dispatch()}disposeInternal(){for(let t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0}}const C="beforeoperations",w="afteroperations";class O extends r.a{constructor(t,e,n){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}}class x extends l.a{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=j(t[i]);return n}(t.sources);const e=this.changed.bind(this);for(let t=0,n=this.layers_.length;t<n;++t)this.layers_[t].addEventListener(s.a.CHANGE,e);var n;this.useResolutions_=null!==t.resolutions,this.tileQueue_=new u.a((function(){return 1}),this.changed.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(f.c)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:Object(f.c)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Object(_.b)(this),renderTargets:{}},this.setAttributions((function(e){const n=[];for(let i=0,r=t.sources.length;i<r;++i){const r=t.sources[i],s=r instanceof h.a?r:r.getSource();if(!s)continue;const o=s.getAttributions();if("function"==typeof o){const t=o(e);n.push.apply(n,t)}}return 0!==n.length?n:null})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new E({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,n){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const r=Object(p.u)(t);i.size[0]=Math.ceil(Object(p.C)(t)/e),i.size[1]=Math.ceil(Object(p.x)(t)/e),i.extent=[r[0]-i.size[0]*e/2,r[1]-i.size[1]*e/2,r[0]+i.size[0]*e/2,r[1]+i.size[1]*e/2],i.time=Date.now();const s=i.viewState;return s.center=r,s.projection=n,s.resolution=e,i}allSourcesReady_(){let t,e=!0;for(let n=0,i=this.layers_.length;n<i;++n)if(t=this.layers_[n].getSource(),!t||"ready"!==t.getState()){e=!1;break}return e}getImage(t,e,n,i){if(!this.allSourcesReady_())return null;e=this.findNearestResolution(e);const r=this.updateFrameState_(t,e,i);if(this.requestedFrameState_=r,this.renderedImageCanvas_){const t=this.renderedImageCanvas_.getResolution(),n=this.renderedImageCanvas_.getExtent();e===t&&Object(p.m)(r.extent,n)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,n=new Array(e);for(let i=0;i<e;++i){t.layerIndex=i;const e=T(this.layers_[i],t);if(!e)return;n[i]=e}const i={};this.dispatchEvent(new O(C,t,i)),this.processor_.process(n,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,n,i){if(e||!n)return;const r=t.extent,s=t.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!Object(p.m)(r,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const t=Math.round(Object(p.C)(r)/s),e=Math.round(Object(p.x)(r)/s);a=Object(g.a)(t,e),this.renderedImageCanvas_=new o.a(r,s,1,a.canvas)}a.putImageData(n,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O(w,t,i)),t.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(t){if(!this.useResolutions_)return null;let e=super.getResolutions();if(!e)for(let n=0,i=this.layers_.length;n<i;++n){if(e=this.layers_[n].getSource().getResolutions(t),e)break}return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}x.prototype.dispose;let R=null;function T(t,e){const n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(0===i||0===r)return null;const s=n.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===i&&o.height===r){return o.getContext("2d").getImageData(0,0,i,r)}}if(R){const t=R.canvas;t.width!==i||t.height!==r?R=Object(g.a)(i,r,void 0,{willReadFrequently:!0}):R.clearRect(0,0,i,r)}else R=Object(g.a)(i,r,void 0,{willReadFrequently:!0});return R.drawImage(o,0,0,i,r),R.getImageData(0,0,i,r)}function j(t){let e;return t instanceof h.a?t instanceof d.b?e=new c.a({source:t}):t instanceof l.a&&(e=new a.a({source:t})):e=t,e}e.a=x}).call(this,n(69).Buffer)},function(t,e,n){"use strict";var i=n(14),r=n(26),s=n(23),o=n(36),a=n(12),l=n(6),h=n(8),c=n(0),u=n(46);class d{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=g(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const r=g(t,e,n);this.cache_[r]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function g(t,e,n){return e+":"+t+":"+(n?Object(u.b)(n):"null")}const f=new d;var p=n(25),_=n(22);class m extends o.a{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Object(l.a)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(h.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(h.d)(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,s,o,a){let l;const h=e.viewState;function u(t,e,n,i){return r.call(s,e,t?n:null,i)}const d=h.projection,g=Object(_.f)(t.slice(),d),f=[[0,0]];if(d.canWrapX()&&i){const t=d.getExtent(),e=Object(c.C)(t);f.push([-e,0],[e,0])}const m=e.layerStatesArray,v=m.length,y=[],b=[];for(let i=0;i<f.length;i++)for(let r=v-1;r>=0;--r){const s=m[r],c=s.layer;if(c.hasRenderer()&&Object(p.b)(s,h)&&o.call(a,c)){const r=c.getRenderer(),o=c.getSource();if(r&&o){const a=o.getWrapX()?g:t,h=u.bind(null,s.managed);b[0]=a[0]+f[i][0],b[1]=a[1]+f[i][1],l=r.forEachFeatureAtCoordinate(b,e,n,h,y)}if(l)return l}}if(0===y.length)return;const E=1/y.length;return y.forEach((t,e)=>t.distanceSq+=e*E),y.sort((t,e)=>t.distanceSq-e.distanceSq),y.some(t=>l=t.callback(t.feature,t.layer,t.geometry)),l}hasFeatureAtCoordinate(t,e,n,i,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,a.b,this,r,s)}getMap(){return this.map_}renderFrame(t){Object(l.a)()}scheduleExpireIconCache(t){f.canExpireCache()&&t.postRenderFunctions.push(v)}}function v(t,e){f.expire()}var y=m,b=n(32),E=n(56),C=n(27),w=n(18),O=n(66),x=n(2),R=n(11);var T=class extends y{constructor(t){super(t),this.fontChangeListenerKey_=Object(x.a)(O.a,b.a.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=w.d+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new E.a(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Object(x.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(C.a.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let s=0,o=e.length;s<o;++s){const o=e[s];t.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!Object(p.b)(o,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in a&&i.push(a))}for(let e=i.length-1;e>=0;--e)i[e].renderDeclutter(t);Object(R.e)(this.element_,this.children_),this.dispatchRenderEvent(C.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},j=n(4),L=n(42),I=n(15);class M extends I.a{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}var S=M;var A=class extends S{constructor(t,e,n,i,r,s){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},P={SINGLECLICK:"singleclick",CLICK:j.a.CLICK,DBLCLICK:j.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},D="pointermove",N="pointerdown",F=n(35),k=n(16);class z extends F.a{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Object(x.a)(n,N,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Object(x.a)(n,D,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(j.a.TOUCHMOVE,this.boundHandleTouchMove_,!!k.e&&{passive:!1})}emulateClick_(t){let e=new A(P.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new A(P.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const e=new A(P.SINGLECLICK,this.map_,t);this.dispatchEvent(e)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==P.POINTERUP||e.type==P.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=P.POINTERDOWN&&e.type!=P.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new A(P.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(x.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new A(P.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const e in t){const n=t[e];this.down_[e]="function"==typeof n?a.c:n}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(x.a)(t,P.POINTERMOVE,this.handlePointerMove_,this),Object(x.a)(t,P.POINTERUP,this.handlePointerUp_,this),Object(x.a)(this.element_,P.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(Object(x.a)(this.element_.getRootNode(),P.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new A(P.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new A(P.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Object(x.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(j.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(x.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(x.c),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var G=z,U=n(30),K="layergroup",Z="size",Y="target",B="view",V=n(49),X=n(38),H=n(20),W=n(7),q=n(33),Q=n(13);class $ extends q.a{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"›",s=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=s):this.collapseLabel_=r;const o=void 0!==t.label?t.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(j.a.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+w.d+" "+w.b+(this.collapsed_&&this.collapsible_?" "+w.a:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let i=!0;const r=t.layerStatesArray;for(let s=0,o=r.length;s<o;++s){const o=r[s];if(!Object(p.b)(o,t.viewState))continue;const a=o.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const h=l(t);if(h)if(i=i&&!1!==a.getAttributionsCollapsible(),Array.isArray(h))for(let t=0,i=h.length;t<i;++t)h[t]in e||(n.push(h[t]),e[h[t]]=!0);else h in e||(n.push(h),e[h]=!0)}return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(Q.b)(e,this.renderedAttributions_)){Object(R.c)(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(w.a),this.collapsed_?Object(R.f)(this.collapseLabel_,this.label_):Object(R.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}var J=$,tt=n(21);class et extends q.a{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"⇧",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),s.addEventListener(j.a.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+w.d+" "+w.b,a=this.element;a.className=o,a.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(w.c)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:tt.b}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(w.c);t||0!==n?t&&0!==n&&this.element.classList.remove(w.c):this.element.classList.add(w.c)}this.label_.style.transform=t}this.rotation_=n}}var nt=et;class it extends q.a{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",o=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(j.a.CLICK,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(j.a.CLICK,this.handleClick_.bind(this,-n),!1);const u=e+" "+w.d+" "+w.b,d=this.element;d.className=u,d.appendChild(h),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:tt.b})):e.setZoom(i)}}}var rt=it;var st="active";class ot extends i.a{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(st)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(st,t)}setMap(t){this.map_=t}}function at(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:void 0!==i?i:250,easing:tt.b})}var lt=ot;var ht=class extends lt{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==P.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_;at(i.getView(),s,r,this.duration_),n.preventDefault(),e=!0}return!e}};function ct(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}var ut=class extends lt{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==P.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==P.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==P.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==P.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function dt(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const gt=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ft=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},pt=a.b,_t=function(t){const e=t.originalEvent;return 0==e.button&&!(k.f&&k.d&&e.ctrlKey)},mt=(a.a,function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),vt=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yt=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},bt=function(t){const e=t.originalEvent;return Object(W.a)(void 0!==e,56),"mouse"==e.pointerType},Et=function(t){const e=t.originalEvent;return Object(W.a)(void 0!==e,56),e.isPrimary&&0===e.button};var Ct=class extends ut{constructor(t){super({stopDown:a.a}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:dt(mt,Et);this.condition_=t.onFocusOnly?dt(ft,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(ct(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();Object(_.e)(e,n.getResolution()),Object(_.d)(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),o=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(i),s[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(o),duration:500,easing:tt.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},wt=n(29);var Ot=class extends ut{constructor(t){t=t||{},super({stopDown:a.a}),this.condition_=t.condition?t.condition:gt,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!bt(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===wt.c)return;const i=e.getSize(),r=t.pixel,s=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){if(!bt(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!bt(t))return!1;if(_t(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}},xt=n(48);class Rt extends o.a{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new xt.a([n])}getGeometry(){return this.geometry_}}var Tt=Rt;const jt="boxstart",Lt="boxdrag",It="boxend",Mt="boxcancel";class St extends I.a{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}var At=class extends ut{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Tt(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:_t,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new St(Lt,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new St(e?It:Mt,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new St(jt,t.coordinate,t)),!0)}onBoxEnd(t){}};var Pt=class extends At{constructor(t){super({condition:(t=t||{}).condition?t.condition:vt,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:tt.b})}},Dt=37,Nt=38,Ft=39,kt=40;var zt=class extends lt{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return mt(t)&&yt(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==j.a.KEYDOWN){const n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(i==kt||i==Dt||i==Ft||i==Nt)){const r=t.map.getView(),s=r.getResolution()*this.pixelDelta_;let o=0,a=0;i==kt?a=-s:i==Dt?o=-s:i==Ft?o=s:a=s;const l=[o,a];Object(_.d)(l,r.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:tt.d,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}};var Gt=class extends lt{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:yt,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==j.a.KEYDOWN||t.type==j.a.KEYPRESS){const n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){const r=t.map,s=i=="+".charCodeAt(0)?this.delta_:-this.delta_;at(r.getView(),s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}};var Ut=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],s=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Kt=n(1);var Zt=class extends lt{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:pt;this.condition_=t.onFocusOnly?dt(ft,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==j.a.WHEEL)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==j.a.WHEEL&&(i=n.deltaY,k.b&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=k.a),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const s=e.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=i;const o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),o),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Object(Kt.b)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),at(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}};var Yt=class extends ut{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=a.a),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const s=t.map,o=s.getView();o.getConstraints().rotation!==wt.c&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(ct(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var Bt=class extends ut{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=a.a),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,s=n.clientY-i.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(ct(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var Vt=n(5),Xt=n(17),Ht=n(52);function Wt(t){t instanceof p.a?t.setMapInternal(null):t instanceof L.b&&t.getLayers().forEach(Wt)}class qt extends i.a{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new L.b({layers:t.layers});let s,o,a;n[K]=i,n[Y]=t.target,n[B]=t.view instanceof X.a?t.view:new X.a,void 0!==t.controls&&(Array.isArray(t.controls)?s=new r.a(t.controls.slice()):(Object(W.a)("function"==typeof t.controls.getArray,47),s=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new r.a(t.interactions.slice()):(Object(W.a)("function"==typeof t.interactions.getArray,48),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.a(t.overlays.slice()):(Object(W.a)("function"==typeof t.overlays.getArray,49),a=t.overlays):a=new r.a;return{controls:s,interactions:o,keyboardEventTarget:e,overlays:a,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:k.a,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Object(h.c)(),this.pixelToCoordinateTransform_=Object(h.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||function(t){t=t||{};const e=new r.a;return(void 0===t.zoom||t.zoom)&&e.push(new rt(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new nt(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new J(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new r.a,n=new Ut(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Ot),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new ht({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new Ct({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Yt),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Bt({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new zt),e.push(new Gt({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Zt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Pt({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new V.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(K,this.handleLayerGroupChanged_),this.addChangeListener(B,this.handleViewChanged_),this.addChangeListener(Z,this.handleSizeChanged_),this.addChangeListener(Y,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof X.a||t.view.then((function(t){n.setView(new X.a(t))})),this.controls.addEventListener(s.a.ADD,t=>{t.element.setMap(this)}),this.controls.addEventListener(s.a.REMOVE,t=>{t.element.setMap(null)}),this.interactions.addEventListener(s.a.ADD,t=>{t.element.setMap(this)}),this.interactions.addEventListener(s.a.REMOVE,t=>{t.element.setMap(null)}),this.overlays_.addEventListener(s.a.ADD,t=>{this.addOverlayInternal_(t.element)}),this.overlays_.addEventListener(s.a.REMOVE,t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}),this.controls.forEach(t=>{t.setMap(this)}),this.interactions.forEach(t=>{t.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){!function t(e,n){if(e instanceof p.a)e.setMapInternal(n);else if(e instanceof L.b){const i=e.getLayers().getArray();for(let e=0,r=i.length;e<r;++e)t(i[e],n)}}(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:a.b,o=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof L.b?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a.b,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,s,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],r=e.height/n[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/i,(s.clientY-e.top)/r]}getTarget(){return this.get(Y)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Object(Vt.k)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Object(h.a)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(K)}setLayers(t){const e=this.getLayerGroup();if(t instanceof r.a)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Object(Vt.e)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Object(h.a)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Z)}getView(){return this.get(B)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return Object(V.b)(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new A(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===N||n===j.a.WHEEL||n===j.a.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[H.a.ANIMATING]||e[H.a.INTERACTING]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(C.a.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(C.a.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new S(U.a.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new S(U.a.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Object(x.c)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(j.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(j.a.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(R.d)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new T(this)),this.mapBrowserEventHandler_=new G(this,this.moveTolerance_);for(const t in P)this.mapBrowserEventHandler_.addEventListener(P[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(j.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(j.a.WHEEL,this.boundHandleBrowserEvent_,!!k.e&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Object(x.a)(t,j.a.KEYDOWN,this.handleBrowserEvent,this),Object(x.a)(t,j.a.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Object(x.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(x.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(x.a)(t,b.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(x.a)(t,j.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(x.c),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new L.a("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Object(x.a)(t,b.a.PROPERTYCHANGE,this.render,this),Object(x.a)(t,j.a.CHANGE,this.render,this),Object(x.a)(t,"addlayer",this.handleLayerAdd_,this),Object(x.a)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Wt(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Object(Xt.a)(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(c.w)(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:i,wantedTiles:{},mapId:Object(l.b)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=Object(c.w)(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!Object(c.F)(this.previousExtent_)&&!Object(c.m)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new S(U.a.MOVESTART,this,i)),this.previousExtent_=Object(c.j)(this.previousExtent_))}this.previousExtent_&&!r.viewHints[H.a.ANIMATING]&&!r.viewHints[H.a.INTERACTING]&&!Object(c.m)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new S(U.a.MOVEEND,this,r)),Object(c.c)(r.extent,this.previousExtent_))}this.dispatchEvent(new S(U.a.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(U.a.LOADSTART)||this.hasListener(U.a.LOADEND)||this.hasListener(C.a.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new L.a("removelayer",e)),this.set(K,t)}setSize(t){this.set(Z,t)}setTarget(t){this.set(Y,t)}setView(t){if(!t||t instanceof X.a)return void this.set(B,t);this.set(B,new X.a);const e=this;t.then((function(t){e.setView(new X.a(t))}))}updateSize(){const t=this.getTargetElement();let e=void 0;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!Object(Xt.a)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Object(Ht.a)("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&Object(Q.b)(e,n)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e=void 0;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}e.a=qt}]);